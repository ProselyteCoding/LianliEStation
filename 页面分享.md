# 页面分享方案设计

## 方案一（基础版 · 必做）
**目标**  
保证用户至少可以把页面链接传播出去。  

**功能**  
- 用户点击页面上的「分享按钮」，弹出对话框。  
- 对话框里展示当前页面链接，并提供「复制」功能。  
- 用户手动将链接粘贴到微信、QQ、微博等社交平台。  

**实现方式**  
- 前端  
  - 在页面底部或头部添加「分享按钮」。  
  - 点击按钮 → 弹出 Modal → 显示 `window.location.href`。  
  - 点击「复制按钮」 → 使用 `navigator.clipboard.writeText(url)` 复制链接。  
- 后端  
  - 如果需要短链或带业务参数（如分享码），提供 API 返回分享链接，前端展示。  

**优缺点**  
- 简单，兼容性强，快速上线。  
- 用户体验差，需要手动粘贴，分享卡片不可控。  

---

## 方案二（可选）
**目标**  
利用系统或浏览器的分享能力，降低用户操作门槛。  

**功能**  
- 用户点击「分享按钮」，弹出对话框。  
- 显示页面链接，并提供「分享到微信 / QQ / 微博」等按钮。  
- 点击按钮 → 跳转到目标平台的分享接口。  

**实现方式**  
- 前端  
  - (非必要)PC 端构造平台分享 URL，例如：  
    - **QQ**: `https://connect.qq.com/widget/shareqq/index.html?url=...&title=...`  
    - **微博**: `https://service.weibo.com/share/share.php?url=...&title=...`  
  - 移动端尝试使用 `navigator.share()`。  
- 后端  
  - 提供一个专门的 **分享落地页（含 meta 标签）**，保证平台抓取时能展示正确的标题、描述、图片。  

**优缺点**  
- 操作更便捷，用户无需手动复制粘贴。  
- 分享卡片依赖平台自动生成，内容可控性有限。  
- navigator.share()不支持firefox、各大老旧版本浏览器，以及国内app内置浏览器，无法在app内置浏览器中打开页面。navigator.share()

---

## 方案三（可选）
**目标**  
实现高度可控的分享体验，支持自定义标题、描述、图片。  

**功能**  
- 用户点击「分享按钮」，弹出对话框。  
- 显示页面链接，并提供「分享到微信 / QQ / 微博」等选项。  
- 分享时，展示开发者自定义的分享卡片内容。  

**实现方式**  
- 前端  
  - 接入各平台 SDK（如微信 JS-SDK、QQ SDK、微博 SDK）。  
  - 使用 API（如 `wx.updateAppMessageShareData`）配置分享标题、描述、图片、链接。  
- 后端  
  - 提供签名认证服务（如微信 JS-SDK 的 `signature`）。  
  - 返回 `appId`、`timestamp`、`nonceStr`、`signature` 等参数。  
  - 维护 access_token 与 jsapi_ticket，确保签名有效。  

**优缺点**  
- 分享卡片完全可控，可支持个性化（如用户生成内容）。  
- 用户体验最佳，可直接点击按钮一键分享。  
- 接入复杂，需要针对不同平台分别开发。  
- 后端需参与，涉及签名、token 管理。  

---