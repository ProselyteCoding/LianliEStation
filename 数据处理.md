# 数据处理

本文档将对应用中的数据处理方式进行规范说明。如有不合理之处请及时指出讨论。

_此外，目前图片存在后端，请探索一下使用 OSS 存储是否可行、有没有必要采用这种方法。_

## 1. 高频信息(涉及缓存)

1. 商城前两页帖子列表、校园墙前两页帖子列表的所有帖子信息（包括点击后跳转的帖子详情）：使用 `redis` 缓存，使用旁路缓存
2. 商品及帖子点赞数、评论数、评论内容、分享数、收藏数等信息：使用 `redis` 缓存，使用写穿透；
3. 搜索词：使用 `redis` 缓存，定期写入数据库（后期实现）；
4. 信箱、历史、收藏：使用 `LocalStorage` 缓存，图片为数据库存储图片对应的 URL 。

## 2. 持久化数据(数据库)

1. 数据库信息。
2. LocalStorage 中的信息：均是更新时先写入数据库，之后使用时读取后再更新 `LocalStorage` ；
3. 用户设置信息：包括用户的昵称、头像、用户名、邮箱等，更新时直接写入数据库，使用则读取并缓存到 `LocalStorage` 中。
