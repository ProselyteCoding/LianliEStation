# é¡¹ç›®è§„èŒƒä¸è®¾è®¡æ–‡æ¡£

æœ¬æ–‡æ¡£æ•´åˆäº† **"è¿ç†eç«™"** é¡¹ç›®çš„æ‰€æœ‰å¼€å‘è§„èŒƒå’Œè®¾è®¡æ–‡æ¡£ï¼Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒå‚è€ƒèµ„æ–™ã€‚

> ğŸ’¡ **æç¤º**ï¼šå¦‚éœ€äº†è§£å›¢é˜Ÿåä½œæµç¨‹å’Œ Git å·¥ä½œæµï¼Œè¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å— (CONTRIBUTING.md)](./CONTRIBUTING.md) å’Œ [Git å·¥ä½œæµæŒ‡å— (GIT_WORKFLOW.md)](./GIT_WORKFLOW.md)ã€‚

[toc]

---

## ä¸€ã€å¼€å‘è§„èŒƒ

### 1. å‘½åè§„èŒƒ

#### 1.1 åŸºæœ¬åŸåˆ™

- **ç®€æ´æ˜“æ‡‚**ï¼šé¿å…ä½¿ç”¨è¡¨æ„ä¸æ˜çš„ç¼©å†™æˆ–æ‹¼éŸ³
- **æ— æ„ä¹‰æ•°å­—**ï¼šä¸è¦å‡ºç°å¦‚ "123"ã€"007" ç­‰æ•°å­—
- **é©¼å³°å‘½åæ³•**ï¼šä»£ç æ–‡ä»¶ä»¥è‹±æ–‡å‘½åï¼Œéµå¾ªé©¼å³°å‘½åæ³•å¹¶åŒºåˆ†å¤§å°å†™
- **è·¯ç”±å‘½å**ï¼šé‡‡ç”¨å°å†™å­—æ¯ï¼Œå•è¯å°½é‡ç®€çŸ­ï¼Œå¤šä¸ªå•è¯ç”¨ `-` è¿æ¥ï¼ˆå¦‚ `user-info`ï¼‰

#### 1.2 æ¨¡å—ä¸çƒ­è¯å¯¹ç…§è¡¨

ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹è‹±æ–‡å•è¯ï¼ˆæˆ–å…¶å„ç§å½¢å¼ï¼‰è¿›è¡Œå‘½åï¼š

| æ¨¡å—å | è‹±æ–‡å•è¯ | ä½¿ç”¨è¯´æ˜ |
|--------|---------|---------|
| å•†å“ | **goods** | ç”¨äºå•†åŸä¸­çš„å•†å“ |
| å•†åŸ | **market** | äºŒæ‰‹äº¤æ˜“æ¨¡å— |
| æ”¶è— | **favorites** | æ”¶è—åŠŸèƒ½ |
| å¸–å­ | **posts** | ç”¨äºæ ¡å›­å¢™ä¸­çš„å¸–å­ |
| æ ¡å›­å¢™ | **forum** | æœ¬ä¹‰ä¸º"è®ºå›" |
| ä¿¡ç®± | **messages** | æ¶ˆæ¯é€šçŸ¥ |
| ç”¨æˆ· | **users/user** | ç”¨æˆ·ç›¸å…³ |
| ç®¡ç†å‘˜ | **admin** | administrator çš„ç¼©å†™ |
| è®¾ç½® | **settings** | è®¾ç½®é¡µé¢ |
| æ›´æ–° | **update** | æ›´æ–°æ“ä½œ |
| è¯¦æƒ… | **detail** | è¯¦æƒ…é¡µ |
| è¯„è®º | **comment** | è¯„è®ºåŠŸèƒ½ |
| ç‚¹èµ | **like** | ç‚¹èµåŠŸèƒ½ |
| ç”³è¯‰ | **appeal** | ç”³è¯‰åŠŸèƒ½ |
| å›å¤ | **response** | å›å¤/å“åº” |
| æ•°æ® | **data** | æ•°æ®ç›¸å…³ |
| è§’è‰² | **role** | ç”¨æˆ·è§’è‰² |
| èµ„æ–™ | **profile** | ä¸ªäººèµ„æ–™ |
| æ ‡ç­¾ | **tag** | åˆ†ç±»æ ‡ç­¾ |
| ä¸»é¢˜ | **theme** | ä¸»é¢˜é£æ ¼ |
| åˆ†ç±» | **category** | åˆ†ç±» |
| æäº¤ | **submit** | æäº¤æ“ä½œ |
| æœç´¢ | **search** | æœç´¢åŠŸèƒ½ |
| å›¾ç‰‡ | **image/img** | å›¾ç‰‡èµ„æº |
| æŒ‰é’® | **button/btn** | æŒ‰é’®ç»„ä»¶ |
| å¸®åŠ© | **help** | å¸®åŠ©æ–‡æ¡£ |
| å…³äº | **about** | å…³äºé¡µé¢ |

> **æ‰©å±•è¡¥å……**ï¼šå¦‚æœªæ‰¾åˆ°åˆé€‚å•è¯ï¼Œå¯ä½¿ç”¨è§„èŒƒç®€æ´çš„è‹±æ–‡å•è¯è¿›è¡Œè¡¥å……ã€‚

#### 1.3 å‰ç«¯å‘½åè§„èŒƒ

**ç›®å½•ç»“æ„**ï¼š
- `/src` ç›®å½•ä¸‹çš„æ¡†æ¶æ–‡ä»¶å¤¹åä¸º**å°å†™å•è¯**
  - ç¤ºä¾‹ï¼š`components`ã€`pages`ã€`store`ã€`utils`ã€`hooks`

**ç»„ä»¶å‘½å**ï¼š
- äºŒçº§åŠä»¥ä¸‹çš„ç»„ä»¶ç›®å½•ï¼ˆè¿”å›å®é™…æ ‡ç­¾çš„ tsx æ–‡ä»¶ï¼‰é‡‡ç”¨**å¤§é©¼å³°å‘½åæ³•**
  - ç¤ºä¾‹ï¼š`components/Navbar/Navbar.tsx`ã€`pages/Login/Login.tsx`
  - ç»„ä»¶å‡½æ•°åä¸æ–‡ä»¶åä¿æŒä¸€è‡´

**åŠŸèƒ½æ¨¡å—å‘½å**ï¼š
- åŠŸèƒ½å‡½æ•°æ¨¡å—é‡‡ç”¨**å°é©¼å³°å‘½åæ³•**
  - ç¤ºä¾‹ï¼š`store/userStore.ts`ã€`store/authStore.ts`ã€`utils/formatDate.ts`

**é…ç½®æ–‡ä»¶å‘½å**ï¼š
- é…ç½®æ–‡ä»¶é‡‡ç”¨**å°å†™å­—æ¯**
  - ç¤ºä¾‹ï¼š`declarations.d.ts`ã€`tsconfig.json`

**TSX æ–‡ä»¶è§„èŒƒ**ï¼š
- å‡½æ•°ç»„ä»¶åç§°ä¸æ–‡ä»¶åä¿æŒä¸€è‡´ï¼ˆå¤§é©¼å³°ï¼‰
- `import` å¯¼å…¥æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œç›¸åŒç±»å‹çš„å¯¼å…¥æ”¾åœ¨ä¸€èµ·
  - å›¾ç‰‡å¯¼å…¥æ”¾ä¸€å—
  - ç»„ä»¶å¯¼å…¥æ”¾ä¸€å—
  - å·¥å…·å‡½æ•°å¯¼å…¥æ”¾ä¸€å—
- å¯¼å‡ºæ”¾åœ¨æ–‡ä»¶åº•éƒ¨ï¼Œä¼˜å…ˆä½¿ç”¨**é»˜è®¤å¯¼å‡º** (`export default`)

**CSS/SCSS è§„èŒƒ**ï¼š
- é‡‡ç”¨ **SCSS è¯­æ³•**
- æ–‡ä»¶é¡¶éƒ¨ä¸ºï¼šå¯¼å…¥æ–‡ä»¶ã€å˜é‡åŠå‡½æ•°å£°æ˜
- **class æˆ– id å‘½å**ï¼š
  - ä½¿ç”¨ 2-3 ä¸ªå°å†™å•è¯é€å±‚åµŒå¥—ï¼Œä¸­é—´åŠ è¿å­—ç¬¦ `-`
  - é€šç”¨å‘½åè¯æ±‡ï¼ˆå¦‚ `container`ï¼‰åº”åœ¨å¤–å±‚åµŒå¥—ç»„ä»¶å
  - ç¤ºä¾‹ï¼š`login-container`ã€`login-form`ã€`login-submit-btn`
- **é€‰æ‹©å™¨ä¹¦å†™**ï¼š
  - ä½¿ç”¨åµŒå¥—ä¹¦å†™
  - ç”±ä¸Šåˆ°ä¸‹çš„é€‰æ‹©å™¨æ’åˆ—é¡ºåºæŒ‰ç…§ç»„ä»¶å‡ºç°çš„é¡ºåº
  - é¿å…ç›´æ¥åœ¨æœ€å¤–å±‚ä½¿ç”¨ `button`ã€`input` ç­‰æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆé˜²æ­¢æ ·å¼å†²çªï¼‰

#### 1.4 åç«¯å‘½åè§„èŒƒ

**è·¯ç”±æ–‡ä»¶å‘½å**ï¼š
- å‚ç…§æ¨¡å—çƒ­è¯è¡¨ï¼Œå•æ–‡ä»¶ä½¿ç”¨å•æ•°å½¢å¼
- å¤åˆå•è¯ä½¿ç”¨**å°é©¼å³°å‘½åæ³•**
  - ç¤ºä¾‹ï¼š`auth.js`ã€`users.js`ã€`goods.js`ã€`aiTemplate.js`

**è·¯ç”±è·¯å¾„å‘½å**ï¼š
- ä¼˜å…ˆä½¿ç”¨ `/` åˆ†éš”å•è¯
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
- ç¤ºä¾‹ï¼š
  - `/api/users/profile`
  - `/api/auth/login`
  - `/api/admin/search-user`

---

### 2. æäº¤è§„èŒƒ

> **æ³¨æ„**ï¼šæ­¤è§„èŒƒäºæµ‹è¯•ç‰ˆæœ¬ v0.1 å‘å¸ƒåæ­£å¼é‡‡ç”¨ã€‚

#### 2.1 åˆ†æ”¯ç®¡ç†è§„èŒƒ

| åˆ†æ”¯ç±»å‹ | ä¸»è¦ç”¨é€” | å‘½åç¤ºä¾‹ | ç”Ÿå‘½å‘¨æœŸ |
|---------|---------|---------|---------|
| **main** | çº¿ä¸Šæ­£å¼å‘å¸ƒçš„ç¨³å®šä»£ç  | `main` | æ°¸ä¹… |
| **dev** | å›¢é˜Ÿæ—¥å¸¸å¼€å‘ä¸»åˆ†æ”¯ | `dev` | æ°¸ä¹… |
| **feature/xxx** | æ–°åŠŸèƒ½å¼€å‘ï¼Œæ¯ä¸ªåŠŸèƒ½å•ç‹¬åˆ†æ”¯ | `feature/login` | ä¸´æ—¶ |
| **fix/xxx** | bug ä¿®å¤ï¼Œæ¯ä¸ª bug å•ç‹¬åˆ†æ”¯ | `fix/login-error` | ä¸´æ—¶ |
| **refactor/xxx** | ä»£ç é‡æ„æˆ–ä¼˜åŒ–ï¼Œä¸æ”¹å˜åŠŸèƒ½ | `refactor/user-service` | ä¸´æ—¶ |
| **hotfix/xxx** | ç´§æ€¥ä¿®å¤çº¿ä¸Šé—®é¢˜ | `hotfix/payment-bug` | ä¸´æ—¶ |
| **release/xxx** | ç‰ˆæœ¬å‘å¸ƒå‰çš„å‡†å¤‡å’Œæµ‹è¯• | `release/v1.2.0` | ä¸´æ—¶ |
| **docs/xxx** | æ–‡æ¡£ç›¸å…³ç»´æŠ¤ | `docs/api-update` | ä¸´æ—¶ |
| **chore/xxx** | æ„å»º/ä¾èµ–/é…ç½®ç­‰æ‚é¡¹ç»´æŠ¤ | `chore/update-ci` | ä¸´æ—¶ |
| **experiment/xxx** | å®éªŒæ€§å¼€å‘æˆ–æ–°æŠ€æœ¯å°è¯• | `experiment/new-ui` | ä¸´æ—¶ |
| **staging/test/xxx** | æµ‹è¯•æˆ–é¢„å‘å¸ƒç¯å¢ƒ | `staging` | ä¸´æ—¶ |

#### 2.2 å¼€å‘æµç¨‹å»ºè®®

1. ä» **dev** åˆ†æ”¯æ‹‰å–æœ€æ–°ä»£ç å¹¶æ–°å»º featureã€fixã€refactor ç­‰åˆ†æ”¯è¿›è¡Œå¼€å‘
2. å¼€å‘å®Œæˆåï¼Œå°†åˆ†æ”¯åˆå¹¶åˆ° **dev** åˆ†æ”¯ï¼Œå¹¶å‘èµ· **Pull Request**ï¼ˆåˆå¹¶è¯·æ±‚ï¼‰
3. è´Ÿè´£äººåœ¨ç‰ˆæœ¬å¼€å‘å®Œæˆåï¼Œå°† **dev** åˆ†æ”¯åˆå¹¶åˆ° **main**ï¼Œå¹¶åœ¨ main ä¸Šæ‰“ **tag** æ ‡è®°ç‰ˆæœ¬

#### 2.3 Git æäº¤ä¿¡æ¯è§„èŒƒï¼ˆAngular é£æ ¼ï¼‰

å‚è€ƒ [Angular å®˜æ–¹æ–‡æ¡£](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines)ã€‚

**åŸºæœ¬æ ¼å¼**ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type ç±»å‹**ï¼š

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **feat** | æ–°åŠŸèƒ½ | `feat(login): add remember me function` |
| **fix** | Bug ä¿®å¤ | `fix(navbar): fix menu display issue` |
| **docs** | æ–‡æ¡£æ›´æ–° | `docs(api): update API documentation` |
| **style** | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ | `style(login): format code` |
| **refactor** | é‡æ„ï¼ˆä¸æ”¹å˜åŠŸèƒ½ï¼‰ | `refactor(user): optimize user service` |
| **perf** | æ€§èƒ½ä¼˜åŒ– | `perf(market): improve loading speed` |
| **test** | æµ‹è¯•ç›¸å…³ | `test(auth): add login tests` |
| **chore** | æ„å»º/å·¥å…·/é…ç½® | `chore(deps): update dependencies` |

**Scopeï¼ˆèŒƒå›´ï¼‰**ï¼š
- æŒ‡æ˜ä¿®æ”¹çš„æ¨¡å—æˆ–åŠŸèƒ½
- ç¤ºä¾‹ï¼š`auth`ã€`user`ã€`market`ã€`forum`ã€`admin`ã€`api`

**Subjectï¼ˆä¸»é¢˜ï¼‰**ï¼š
- ç®€çŸ­æè¿°ä¿®æ”¹å†…å®¹ï¼ˆ50 å­—ç¬¦ä»¥å†…ï¼‰
- ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼ˆadd, fix, update, remove ç­‰ï¼‰
- é¦–å­—æ¯å°å†™
- ç»“å°¾ä¸åŠ å¥å·

**å®Œæ•´ç¤ºä¾‹**ï¼š

```git
feat(login): add remember me function

- implemented remember me checkbox
- updated login API

BREAKING CHANGE: login API now requires a token
```

#### 2.4 å…¶ä»–æ³¨æ„äº‹é¡¹

- æ¯æ¬¡æäº¤å‰ç¡®ä¿ä»£ç å·²é€šè¿‡æœ¬åœ°æµ‹è¯•
- é¿å…æäº¤æœªå®Œæˆæˆ–æœ‰æ˜æ˜¾ bug çš„ä»£ç 
- åˆå¹¶åˆ†æ”¯å‰å…ˆåŒæ­¥ä¸»åˆ†æ”¯ï¼ˆå¦‚ devï¼‰ï¼Œè§£å†³å†²çªåå†æäº¤åˆå¹¶è¯·æ±‚
- æäº¤ä¿¡æ¯è¦ç®€æ˜æ‰¼è¦ï¼Œå‡†ç¡®åæ˜ æœ¬æ¬¡æ›´æ”¹å†…å®¹

---

### 3. æ ·å¼è§„èŒƒ

> **è¯´æ˜**ï¼šç”±äºå‰ç«¯ä»£ç æ›´æ–°é¢‘ç¹ä¸”å›¢é˜Ÿå¹¶éä¸“ä¸šè®¾è®¡å¸ˆï¼Œæ­¤æ–‡æ¡£ä¼šé¢‘ç¹æ›´æ–°ï¼Œæ›´å¤šä½œä¸ºå‚ç…§ã€‚å·²ç¡®å®šçš„æ ·å¼è§„èŒƒåº”ä¸¥æ ¼éµå®ˆã€‚

#### 3.1 å›¾æ ‡è§„èŒƒ

**ç´ æåº“**ï¼š[iconfont é›†åˆ](https://www.iconfont.cn/collections/detail?spm=a313x.collections_index.i1.d9df05512.24e13a810CiY9B&cid=51552)

**æ ¼å¼**ï¼šSVG æ ¼å¼

**å°ºå¯¸è§„èŒƒ**ï¼š
- **å¯ç‚¹å‡»å›¾æ ‡**ï¼ˆTabbarã€Navbar è¿”å›é”®ã€Detail é¡µï¼‰ï¼š**32px**
- **å…¶ä»–å›¾æ ‡**ï¼š**24px**

**é¢œè‰²è§„èŒƒ**ï¼š
- **æœªé€‰ä¸­çŠ¶æ€**ï¼ˆTabbarã€è¿”å›é”®ç­‰ï¼‰ï¼šå¾…è¡¥å……
- **é€‰ä¸­çŠ¶æ€**ï¼ˆTabbarï¼‰ï¼š`#0674C1`ï¼ˆè¿ç†è“ï¼‰

#### 3.2 é¢œè‰²è§„èŒƒ

- **ä¸»é¢œè‰²**ï¼š`#FFFFFF`ï¼ˆç™½è‰²ï¼‰
- **ä¸»é¢˜è‰²**ï¼š`#0674C1`ï¼ˆè¿ç†è“ï¼‰
- **åº•è‰²åŠåˆ†å‰²çº¿**ï¼šå¾…è¡¥å……
- **æ–‡å­—é¢œè‰²**ï¼šå¾…è¡¥å……

**æŒ‰é’®é¢œè‰²**ï¼š
- **agreeï¼ˆåŒæ„/ç¡®è®¤ï¼‰**ï¼šç»¿è‰²ï¼ˆå¾…è¡¥å……å…·ä½“è‰²å€¼ï¼‰
- **disagreeï¼ˆæ‹’ç»/å–æ¶ˆï¼‰**ï¼šçº¢è‰²ï¼ˆå¾…è¡¥å……å…·ä½“è‰²å€¼ï¼‰
- **warningï¼ˆè­¦å‘Šï¼‰**ï¼šé»„è‰²ï¼ˆå¾…è¡¥å……å…·ä½“è‰²å€¼ï¼‰
- **å…¶ä»–**ï¼šå¾…è¡¥å……

#### 3.3 å­—ä½“è§„èŒƒ

- **å­—ä½“**ï¼šå¾…è¡¥å……
- **å­—å·**ï¼šå¾…è¡¥å……

#### 3.4 å¸ƒå±€è§„èŒƒ

- **ä¼˜å…ˆä½¿ç”¨ Flex å¸ƒå±€**
- å¯¹äºå®½/é«˜é 100% çš„å…ƒç´ ä¸€èˆ¬**å±…ä¸­åå†è°ƒèŠ‚ç›¸å¯¹ä½ç½®**
- ç‰¹æ®Šæƒ…å†µä»¥å®é™…éœ€æ±‚ä¸ºå‡†

#### 3.5 åŠ¨ç”»è§„èŒƒ

- **é¡µé¢å·¦å³åˆ‡æ¢åŠ¨ç”»**ï¼šå¾…è¡¥å……
- **ç­‰å¾…åŠ è½½åŠ¨ç”»**ï¼šå¾…è¡¥å……
- **ç‚¹èµåŠ¨ç”»**ï¼šå¾…è¡¥å……

#### 3.6 ç»„ä»¶åº“è§„èŒƒ

**ä½¿ç”¨åŸåˆ™**ï¼š
- **åŸç”Ÿå¼€å‘** æˆ– ä½¿ç”¨ **Ant Design ç»„ä»¶åº“**
- **ç®€å•æ ·å¼**ï¼šä½¿ç”¨åŸç”Ÿ CSS
- **å¤æ‚ç»„ä»¶æˆ–æˆå‹ç»å…¸ç»„ä»¶**ï¼šä½¿ç”¨ antd

**å¸¸ç”¨ Ant Design ç»„ä»¶**ï¼š

| ç»„ä»¶ | ç”¨é€” | æ–‡æ¡£é“¾æ¥ |
|------|------|---------|
| **Carousel** | èµ°é©¬ç¯/è½®æ’­å›¾ | [æ–‡æ¡£](https://ant-design.antgroup.com/components/carousel-cn) |
| **Spin** | åŠ è½½ä¸­çŠ¶æ€ | å¾…è¡¥å……é“¾æ¥ |
| **Upload** | æ–‡ä»¶ä¸Šä¼  | [æ–‡æ¡£](https://ant-design.antgroup.com/components/upload-cn) |
| **Switch** | å¼€å…³åˆ‡æ¢ | [æ–‡æ¡£](https://ant-design.antgroup.com/components/switch-cn) |
| **Select** | ä¸‹æ‹‰é€‰æ‹©å™¨ | [æ–‡æ¡£](https://ant-design.antgroup.com/components/select-cn) |
| **Button** | æŒ‰é’® | å¾…è¡¥å…… |
| **Input** | è¾“å…¥æ¡† | å¾…è¡¥å…… |
| **Message** | å…¨å±€æç¤º | å¾…è¡¥å…… |

---

### 4. æ•°æ®å¤„ç†è§„èŒƒ

> **æ³¨æ„**ï¼šç›®å‰å›¾ç‰‡å­˜å‚¨åœ¨åç«¯ï¼Œéœ€æ¢ç´¢ä½¿ç”¨ **OSS** å­˜å‚¨çš„å¯è¡Œæ€§å’Œå¿…è¦æ€§ã€‚

#### 4.1 é«˜é¢‘ä¿¡æ¯ï¼ˆæ¶‰åŠç¼“å­˜ï¼‰

**ä½¿ç”¨ Redis ç¼“å­˜**ï¼š

**1. æ—è·¯ç¼“å­˜ï¼ˆCache Asideï¼‰**ï¼š
- **å•†åŸå‰ä¸¤é¡µå¸–å­åˆ—è¡¨**
- **æ ¡å›­å¢™å‰ä¸¤é¡µå¸–å­åˆ—è¡¨**
- **æ‰€æœ‰å¸–å­è¯¦æƒ…**ï¼ˆç‚¹å‡»åè·³è½¬çš„è¯¦æƒ…é¡µï¼‰

**å®ç°æ–¹å¼**ï¼š
- å…ˆæŸ¥ Redis
- æœªå‘½ä¸­åˆ™æŸ¥æ•°æ®åº“
- æŸ¥è¯¢ç»“æœå†™å…¥ Redis

**2. å†™ç©¿é€ï¼ˆWrite Throughï¼‰**ï¼š
- **ç‚¹èµæ•°**
- **è¯„è®ºæ•°**
- **è¯„è®ºå†…å®¹**
- **åˆ†äº«æ•°**
- **æ”¶è—æ•°**

**å®ç°æ–¹å¼**ï¼š
- æ›´æ–°æ—¶åŒæ—¶å†™å…¥ Redis å’Œæ•°æ®åº“
- ä¿è¯æ•°æ®ä¸€è‡´æ€§

**3. å®šæœŸå†™å…¥æ•°æ®åº“**ï¼š
- **æœç´¢è¯**ï¼ˆåæœŸå®ç°ï¼‰

**å®ç°æ–¹å¼**ï¼š
- å…ˆè®°å½•åˆ° Redis
- å®šæ—¶ä»»åŠ¡æ‰¹é‡å†™å…¥æ•°æ®åº“

#### 4.2 LocalStorage ç¼“å­˜

**ä½¿ç”¨åœºæ™¯**ï¼š
- **ä¿¡ç®±**ï¼ˆæ¶ˆæ¯é€šçŸ¥ï¼‰
- **å†å²è®°å½•**ï¼ˆæµè§ˆå†å²ï¼‰
- **æ”¶è—åˆ—è¡¨**ï¼ˆç”¨æˆ·æ”¶è—ï¼‰

**å­˜å‚¨å†…å®¹**ï¼š
- å›¾ç‰‡ä¸ºæ•°æ®åº“å­˜å‚¨å›¾ç‰‡å¯¹åº”çš„ **URL**ï¼ˆè€Œéå›¾ç‰‡æœ¬èº«ï¼‰

**æ›´æ–°ç­–ç•¥**ï¼š
- æ›´æ–°æ—¶**å…ˆå†™å…¥æ•°æ®åº“**
- ä½¿ç”¨æ—¶ä»æ•°æ®åº“è¯»å–å**æ›´æ–° LocalStorage**

#### 4.3 æŒä¹…åŒ–æ•°æ®ï¼ˆæ•°æ®åº“ï¼‰

**MySQL æ•°æ®åº“å­˜å‚¨**ï¼š

1. **ç”¨æˆ·è®¾ç½®ä¿¡æ¯**
   - ç”¨æˆ·æ˜µç§°ã€å¤´åƒã€ç”¨æˆ·åã€é‚®ç®±ç­‰
   - æ›´æ–°æ—¶ç›´æ¥å†™å…¥æ•°æ®åº“
   - ä½¿ç”¨æ—¶è¯»å–å¹¶ç¼“å­˜åˆ° LocalStorage

2. **LocalStorage ä¿¡æ¯çš„æŒä¹…åŒ–**
   - LocalStorage ä¸­çš„ä¿¡æ¯å‡éœ€åŒæ­¥åˆ°æ•°æ®åº“
   - æ•°æ®åº“ä½œä¸ºæŒä¹…åŒ–å¤‡ä»½

3. **æ ¸å¿ƒä¸šåŠ¡æ•°æ®**
   - å•†å“ä¿¡æ¯
   - å¸–å­ä¿¡æ¯
   - ç”¨æˆ·ä¿¡æ¯
   - äº¤æ˜“è®°å½•
   - ç”³è¯‰è®°å½•
   - ç­‰ç­‰

#### 4.4 å›¾ç‰‡å­˜å‚¨ç­–ç•¥

**å½“å‰æ–¹æ¡ˆ**ï¼š
- å›¾ç‰‡å­˜å‚¨åœ¨**åç«¯æœåŠ¡å™¨** `public/uploads/` ç›®å½•
- è¿”å›ç»™å‰ç«¯çš„æ˜¯å›¾ç‰‡ URL

**å¾…è¯„ä¼°æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ **OSSï¼ˆå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼‰**
- ä¼˜åŠ¿ï¼š
  - å‡è½»æœåŠ¡å™¨å‹åŠ›
  - åŠ é€Ÿå›¾ç‰‡åŠ è½½
  - ä¾¿äºç®¡ç†å’Œå¤‡ä»½
- åŠ£åŠ¿ï¼š
  - éœ€è¦é¢å¤–æˆæœ¬
  - å¢åŠ ç³»ç»Ÿå¤æ‚åº¦

---

## äºŒã€äº§å“è®¾è®¡

### 1. äº§å“åˆ†æ

#### 1.1 äº§å“æ–‡æ¡£è¯´æ˜

æœ¬éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº§å“çš„**å®šä½ã€ä¼˜åŠ¿ã€åŠŸèƒ½ã€ä»¥åŠå®ç°è®¾è®¡**ã€‚å¼€å‘è€…åº”è¯¦ç»†é˜…è¯»ï¼Œæ·±å…¥ç†è§£**æˆ‘ä»¬åœ¨åšä»€ä¹ˆã€å°†è¦æ€ä¹ˆåš**ï¼Œè¿›è€Œä¼˜åŒ–å·²æœ‰å·¥ä½œï¼Œå¹¶å®Œæˆåç»­åŠŸèƒ½ã€‚

#### 1.2 äº§å“å®šä½

**é¡¹ç›®é¢˜ç›®**ï¼š**"è¿ç†eç«™"â€”â€”æ ¡å›­æ™ºè”ç”Ÿæ´»å¹³å°**

**æ ¸å¿ƒå®šä½**ï¼šæœåŠ¡äºæ ¡å›­ç”Ÿæ´»çš„æ™ºèƒ½å¹³å°

**æœåŠ¡å†…å®¹**ï¼š
- **äºŒæ‰‹äº¤æ˜“æ¨¡å—**ï¼šå­¦ç”Ÿä¹‹é—´çš„äºŒæ‰‹ç‰©å“ä¹°å–
- **æ ¡å›­å¢™æ¨¡å—**ï¼šæ ¡å›­ä¿¡æ¯å‘å¸ƒå’Œäº¤æµå¹³å°

**ç›®æ ‡ç”¨æˆ·**ï¼š
- å­¦ç”Ÿï¼ˆä¸»è¦ï¼‰
- æ ¡å‹
- æ ¡å†…ç»„ç»‡ï¼ˆå¯åç»­æ´½è°ˆï¼‰
- å‘¨è¾¹åº—é“ºï¼ˆå¯åç»­æ´½è°ˆï¼‰

#### 1.3 äº§å“ä¼˜åŠ¿

**1. æ™ºèƒ½åŒ–ä½“ç°**ï¼š

**AI æ™ºèƒ½åº”ç”¨**ï¼š
- å¼•å…¥**å¤§è¯­è¨€æ¨¡å‹**å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š
  - **äºŒæ‰‹äº¤æ˜“**ï¼šå•†å“å‘å¸ƒä¸å®¡æ ¸çš„æ™ºèƒ½åŒ–
  - **æ ¡å›­å¢™**ï¼šå¸–å­å‘å¸ƒä¸å®¡æ ¸çš„æ™ºèƒ½åŒ–
  - **ä¼˜åŠ¿**ï¼š
    - æ–¹ä¾¿ç”¨æˆ·å‘å¸ƒå†…å®¹
    - å‡è½»äººå·¥å®¡æ ¸å‹åŠ›
    - æé«˜å®¡æ ¸æ•ˆç‡å’Œå‡†ç¡®æ€§

**æ·±å…¥çš„åŠŸèƒ½æ€è€ƒ**ï¼š
- å¯¹å¹³å°è¾ƒå¤šåŠŸèƒ½è¿›è¡Œæ·±å…¥æ€è€ƒ
- å¼€å‘æœ€è´´è¿‘ç”Ÿæ´»çš„äº§å“
- ç”¨æˆ·ä½“éªŒç›®æ ‡ï¼š**èˆ’é€‚ã€ä¾¿æ·ã€ç®€å•ã€é«˜æ•ˆ**
- é¿å…å¸‚é¢ç«å“çš„å¼Šç«¯ï¼š
  - åŠŸèƒ½ç¹ç
  - æ“ä½œå¤æ‚
  - åŠŸèƒ½å†—ä½™

**2. "åšå‡æ³•"ç†å¿µ**ï¼š

**æ ¸å¿ƒæ€æƒ³**ï¼š
- ä¸åŒäºå…¶ä»–å¹³å°ä¸æ–­"åšåŠ æ³•"
- **åªæ¶‰åŠæœ€æœ‰éœ€æ±‚çš„æ¨¡å—**ï¼šäºŒæ‰‹äº¤æ˜“ + æ ¡å›­å¢™
- **æŠŠæ ¸å¿ƒåŠŸèƒ½åšåˆ°æè‡´**
- **ç»™ç”¨æˆ·æœ€ç®€æ´å’Œå‹å¥½çš„ä½“éªŒ**
- **é¿å…"ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼"**

**3. éœ€æ±‚ä¸å¸‚åœºç¼ºå£**ï¼š

**ä»¥å¤§å·¥ä¸ºä¾‹**ï¼š
- `iå¤§å·¥` APP å’Œå­¦æ ¡å®˜ç½‘ï¼š
  - åŒ…å«ç”Ÿæ´»å‡ ä¹æ‰€æœ‰**æ— æ²Ÿé€šå¼çš„å®˜æ–¹æœåŠ¡**
- **å¸‚åœºç¼ºå£**ï¼š
  - **æ²Ÿé€šå¼å¸‚åœº**å…¨éƒ¨ç”±ç¬¬ä¸‰æ–¹å¹³å°æä¾›ï¼ˆQQ åŠå¾®ä¿¡ç¾¤èŠï¼‰
  - å¤§å·¥ç”¨æˆ·ç¾¤ä½“ä¸æ–­æ‰©å¤§
  - ç¼ºä¹æ²Ÿé€šæ€§çš„å¯¹å£äº§å“
- **æˆ‘ä»¬çš„æœºä¼š**ï¼š
  - æŠ“ä½è¿™ä¸ªå¸‚åœºç¼ºå£
  - å»ºç«‹è‡ªå·±çš„ç«‹è¶³ä¹‹åœ°

#### 1.4 åæ€ä¸è­¦é†’

**å†å²æ•™è®­**ï¼š
- æ®å­¦é•¿æ‰€è¨€ï¼Œ`iå¤§å·¥` æ›¾æœ‰ç±»ä¼¼æ ¡å›­å¢™çš„åŠŸèƒ½
- ç”±äºéƒ¨åˆ†äººçš„**ä¸å½“è¨€è®º**å¯¼è‡´åŠŸèƒ½è¢«æ•´ä½“æ‹¿ä¸‹

**æ ¸å¿ƒè­¦ç¤º**ï¼š
- **âš ï¸ ä¸€å®šè¦å®Œå–„å®¡æ ¸æœºåˆ¶ï¼ï¼ï¼**
- ä½¿ç”¨ **"AI + äººå·¥"** çš„åŒä¿é™©
- **åšå†³æœç»ç±»ä¼¼äº‹ä»¶çš„å‘ç”Ÿ**

**å®‰å…¨æ€§è€ƒè™‘**ï¼š

1. **æ•°æ®å®‰å…¨**ï¼š
   - å¯¹æ•°æ®è¿›è¡Œç»å¯¹å®‰å…¨åŒ–ç®¡ç†
   - ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶å’ŒåŠ å¯†å­˜å‚¨

2. **é£é™©éš”ç¦»**ï¼š
   - **æ”¯ä»˜åŠŸèƒ½**ï¼šå¯¼å‘ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¦‚æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ï¼‰
   - **åœ¨çº¿èŠå¤©åŠŸèƒ½**ï¼šå¯¼å‘æˆç†Ÿçš„ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆç›®å‰è€ƒè™‘ä¸º QQï¼‰
   - **åŸåˆ™**ï¼šé¿å…å°†é£é™©å¼•å‘å¹³å°ï¼Œä½¿ç”¨æˆç†Ÿçš„ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆ

3. **æŠ€æœ¯åº”ç”¨åŸåˆ™**ï¼š
   - åç»­å¼€å‘ä¸­åº”ç”¨æŠ€æœ¯æ—¶
   - **å®‰å…¨æ€§**ä½œä¸ºé¦–è¦è€ƒè™‘å› ç´ 

#### 1.5 åŠŸèƒ½æµç¨‹

> å¾…æ›´æ–°......

#### 1.6 è®¾è®¡å›¾è¯¦è§£

> å¾…æ›´æ–°......

---

### 2. ç‰ˆæœ¬è®¡åˆ’

> **è¯´æ˜**ï¼šæ­¤æ–‡æ¡£åœ¨ç‰ˆæœ¬å¼€å‘å‰æˆ–å¼€å‘æ—¶ç¼–å†™ï¼Œç”¨äºè®°å½•ç‰ˆæœ¬è®¡åˆ’å’Œè¿›åº¦ï¼Œæˆ–å°†æ”¹åŠ¨è¾ƒå¤§çš„åŠŸèƒ½æ„æ€è§„åˆ’è‡³ä¸‹ä¸€ç‰ˆæœ¬ã€‚

#### 2.1 æµ‹è¯•ç‰ˆæœ¬

**v0.1.0-alphaï¼ˆå†…éƒ¨æµ‹è¯•ç‰ˆï¼‰**

**é¢„æœŸæ—¶é—´**ï¼š2025 å¹´ 8 æœˆ 15 æ—¥

**ä¸»è¦ç›®æ ‡**ï¼š
- å®ç°é¡¹ç›®åŸºæœ¬åŠŸèƒ½
- æ­å»ºæ¡†æ¶
- ä½œä¸ºæ¼”ç¤ºç‰ˆæœ¬è¿›è¡Œæµ‹è¯•
- å¸å¼•åˆä½œ

**ä¸»è¦æ¨¡å—**ï¼š

**Userï¼ˆç”¨æˆ·ï¼‰**ï¼š
- Userï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰
- Authï¼ˆè®¤è¯ï¼‰

**Adminï¼ˆç®¡ç†å‘˜ï¼‰**ï¼š
- ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—

**Mainï¼ˆä¸»è¦åŠŸèƒ½ï¼‰**ï¼š
- Marketï¼ˆå•†åŸ/äºŒæ‰‹äº¤æ˜“ï¼‰
- Forumï¼ˆæ ¡å›­å¢™ï¼‰

**Recordï¼ˆè®°å½•ï¼‰**ï¼š
- Messageï¼ˆä¿¡ç®±ï¼‰
- Historyï¼ˆå†å²è®°å½•ï¼‰
- Favoriteï¼ˆæ”¶è—ï¼‰

**æœåŠ¡å·ç›¸å…³**ï¼š
- ç¡®å®šå„ç±»æ¨æ–‡æ¨¡æ¿
- å·¥å•è®¢é˜…
- ç¡®å®šå®£å‘è®¡åˆ’

---

**v0.2.0-betaï¼ˆå…¬æµ‹ç‰ˆï¼‰**

**é¢„æœŸæ—¶é—´**ï¼šæ–°å­¦æœŸç¬¬ä¸€ä¸ªæœˆå

**æ–°å¢åŠŸèƒ½**ï¼š

1. **ä¸ªæ€§åŒ–**ï¼š
   - ä¸»é¢˜é£æ ¼åˆ‡æ¢
   - å¤´åƒæ¡†ï¼ˆå¾…å®šï¼‰
   - ç­‰çº§ç³»ç»Ÿï¼ˆå¾…å®šï¼‰

2. **æ¸¸å®¢æ¨¡å¼**ï¼š
   - å…è®¸æœªç™»å½•ç”¨æˆ·æµè§ˆéƒ¨åˆ†å†…å®¹

3. **å•†å“/å¸–å­å¹¿å‘Šä½**ï¼š
   - ä¸ºå•†å®¶æä¾›å¹¿å‘Šå±•ç¤ºä½ç½®

4. **VIP/PRO åˆ¶åº¦**ï¼š
   - ä¼šå‘˜ç³»ç»Ÿ
   - æä¾›å¢å€¼æœåŠ¡

......ï¼ˆæ›´å¤šåŠŸèƒ½å¾…è§„åˆ’ï¼‰

#### 2.2 æ­£å¼ç‰ˆæœ¬

**v1.0.0ï¼ˆé¦–ä¸ªæ­£å¼ç‰ˆï¼‰**

**é¢„æœŸæ—¶é—´**ï¼šæ–°å­¦æœŸç¬¬ä¸€è‡³ä¸¤ä¸ªæœˆåï¼ˆè§†å®¡æ ¸ä¸é¡¹ç›®è¿›å±•è€Œå®šï¼‰

**æ–°å¢åŠŸèƒ½**ï¼š

1. **å¤šç«¯é€‚é…**ï¼š
   - H5 ç«¯é¡µé¢é€‚é…
   - å¾®ä¿¡å°ç¨‹åºç«¯
   - ä¸ H5 ç«¯å…±ç”¨åç«¯

2. **é¡¹ç›®äº§å“åŒ–**ï¼š
   - é¡¹ç›®æ¨¡æ¿æ‰“åŒ…
   - å¯å®Œæ•´å‡ºå”®ç»™å…¶ä»–å­¦æ ¡

**åç»­ç‰ˆæœ¬**ï¼š
- æŒç»­è¿­ä»£
- æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–
- æ·»åŠ æ›´å¤šåŠŸèƒ½

---

### 3. æ¥å£è®¾è®¡è§„èŒƒ

> **è¯´æ˜**ï¼šæœ¬éƒ¨åˆ†ä»å‰ç«¯è§’åº¦æè¿°æ‰€éœ€è¯·æ±‚æ¥å£ï¼Œä»¥æ¨¡å—ä¸ºå•ä½åˆ’åˆ†ã€‚å¦‚è·¯ç”±è®¾è®¡ä¸åˆç†æˆ–æ¥å£åŠŸèƒ½æœ‰é—®é¢˜ï¼Œè¯·åŠæ—¶è®¨è®ºã€‚

#### 3.1 é‡è¦æ¦‚å¿µåŒºåˆ†

âš ï¸ **æ ¸å¿ƒåŒºåˆ†**ï¼š
- **å•†å“ (goods)**ï¼šç”¨äº**äºŒæ‰‹äº¤æ˜“æ¨¡å—**
- **å¸–å­ (posts)**ï¼šç”¨äº**æ ¡å›­å¢™æ¨¡å—**

**æ•°æ®åº“å»ºè¡¨å‘½åä¹Ÿåº”åšå¯¹åº”ä¿®æ”¹**ï¼Œç¡®ä¿æ¦‚å¿µæ¸…æ™°ã€‚

---

#### 3.2 æ¨¡å—ä¸€ï¼šç”¨æˆ·æ¨¡å—

**å‘½åç©ºé—´**ï¼š
- `/api/auth` - ç™»å½•æ³¨å†ŒåŠå¯†ç ä¿®æ”¹
- `/api/users` - ç”¨æˆ·ä¿¡æ¯è·å–ä¸ä¿®æ”¹

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| ç”¨æˆ·æ³¨å†Œ | POST | `/api/auth/register` | åŸè·¯ç”± `/api/users/register`ï¼Œæ— éœ€ä¿®æ”¹å†…å®¹ âœ… |
| ç”¨æˆ·ç™»å½• | POST | `/api/auth/login` | åŸè·¯ç”± `/login`ï¼Œæ— éœ€ä¿®æ”¹å†…å®¹ âœ… |
| è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | GET | `/api/users/profile` | æ•´åˆè·å–ä¿¡æ¯ä¸è·å–ä¸»é¢˜æ¥å£ï¼Œåœ¨ç»Ÿä¸€æ¥å£ä¸­è¿”å›ï¼Œå‰ç«¯æ‹†è§£ã€‚åŸè·¯ç”± `/api/users/profile` âœ… |
| ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ | PUT | `/api/users/profile` | ä¿®æ”¹æ˜µç§°ç­‰è®¾ç½®ä¸­çš„å…¨éƒ¨æ–‡å­—ä¿¡æ¯ï¼ˆåŒ…æ‹¬ä¸»é¢˜å·ï¼‰âœ… |
| è¯·æ±‚éªŒè¯ç  | POST | `/api/auth/verification` | å‘é€éªŒè¯ç ï¼ˆç”¨äºé‡ç½®å¯†ç ï¼‰ï¼ŒåŸè·¯ç”± `/api/users/RequestVerification` âœ… |
| ä¿®æ”¹å¯†ç  | PUT | `/api/auth/change-password` | ä¿®æ”¹å¯†ç ï¼ˆéœ€è¦éªŒè¯ç éªŒè¯ï¼‰ï¼ŒåŸè·¯ç”± `/api/users/change-password` âœ… |
| ä¿®æ”¹ç”¨æˆ·å›¾ç‰‡ | PUT | `/api/users/profile/image` | ç»Ÿä¸€ä¸Šä¼ å¤´åƒ/èƒŒæ™¯/Bannerï¼ˆ`type=avatar/background/banner`ï¼‰ï¼Œåˆå¹¶ä¸‰ä¸ªåˆ†å¼€çš„æ¥å£ âœ… |
| æ ¹æ® ID è·å–ç”¨æˆ·ä¿¡æ¯ | GET | `/api/users/user-info/{user_id}` | ç”¨äºå•†å“è¯¦æƒ…é¡µå’Œå¸–å­é¡µæ˜¾ç¤ºå‘å¸ƒè€…ä¿¡æ¯ï¼ŒåŸè·¯ç”± `/api/users/userInfo/:user_id` âœ… |

---

#### 3.3 æ¨¡å—äºŒï¼šå•†å“æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/goods`

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ†é¡µæŸ¥è¯¢å•†å“ | GET | `/api/goods?campus=1&type=sell&page=1&limit=10` | æ”¯æŒæ ‡é¢˜ã€ç±»å‹ã€æ ¡åŒºç­‰å¤šæ¡ä»¶ç­›é€‰ï¼Œå°†åŸæœ‰è·å–æ‰€æœ‰å¸–å­çš„æ¥å£å¹¶å…¥æ­¤æ¥å£ï¼Œç­›é€‰æ¡ä»¶å¯é»˜è®¤ä¸º"å…¨éƒ¨"ã€‚åŸè·¯ç”± `/api/posts/search` âœ… |
| ä¿®æ”¹å•†å“ | PUT | `/api/goods/{post_id}` | ä»…ä½œè€…æˆ–ç®¡ç†å‘˜å¯æ“ä½œï¼ŒåŸè·¯ç”± `/api/posts/:post_id` âœ… |
| è½¯åˆ é™¤å•†å“ | DELETE | `/api/goods/{post_id}` | æ ‡è®°ä¸º `deleted`ï¼ŒåŸè·¯ç”± `/api/posts/:post_id` âœ… |
| ç‚¹èµ/å–æ¶ˆç‚¹èµ | POST | `/api/goods/{post_id}/like` | ä½¿ç”¨ Redis è®¡æ•°ï¼Œå¼‚æ­¥æŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚åŸè·¯ç”± `/api/like/:post_id` âœ… |
| æŠ•è¯‰/å–æ¶ˆæŠ•è¯‰ | POST | `/api/goods/{post_id}/complaint` | åŒä¸Šï¼Œè¯·æ±‚å¤´æˆ–å‚æ•°éƒ¨åˆ†åŠ ä»¥åŒºåˆ†ã€‚åŸè·¯ç”± `/api/complaint/:post_id` âœ… |

---

#### 3.4 æ¨¡å—ä¸‰ï¼šå†å²æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/history`

**è¯´æ˜**ï¼šæ–°å¢æ ¡å›­å¢™å†å²æ¥å£ï¼Œå‰ç«¯é€‰æ‹©å•†å“æˆ–å¸–å­å†å²è¿›è¡Œåˆ‡æ¢ã€‚

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| æŸ¥è¯¢å‘å¸ƒå†å² | GET | `/api/history/goods` | åŸè·¯ç”± `/api/posts/user-history`ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªæ•°ç»„ï¼šç”¨æˆ·å‘å¸ƒçš„å•†å“å†å² + å‘å¸ƒçš„å¸–å­å†å²ï¼Œå‰ç«¯è§£æ„ âœ… |
| ä¿®æ”¹äº¤æ˜“çŠ¶æ€ | PUT | `/api/history/goods/{post_id}` | ä¿®æ”¹å•†å“çŠ¶æ€ï¼š`active`ï¼ˆè¿›è¡Œä¸­ï¼‰ã€`inactive`ï¼ˆäº¤æ˜“ç»ˆæ­¢æˆ–å®Œæˆï¼‰ã€`deleted`ï¼ˆå·²åˆ é™¤ï¼‰âœ… |
| åˆ é™¤å¸–å­ | DELETE | `/api/history/posts/{post_id}` | è½¯åˆ é™¤å¸–å­ï¼Œç®¡ç†å‘˜å¯ç¡¬åˆ  âœ… |

---

#### 3.5 æ¨¡å—å››ï¼šæ”¶è—æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/favorites`

**è¯´æ˜**ï¼šæ–°å¢æ ¡å›­å¢™æ”¶è—æ¥å£ï¼Œå‰ç«¯é€‰æ‹©å•†å“æˆ–å¸–å­æ”¶è—è¿›è¡Œåˆ‡æ¢ã€‚

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| å•†å“æ·»åŠ æ”¶è— | POST | `/api/favorites/goods/add` | åŸè·¯ç”± `/api/favorites/add` âœ… |
| å•†å“ç§»é™¤æ”¶è— | DELETE | `/api/favorites/goods/remove` | åŸè·¯ç”± `/api/favorites/remove` âœ… |
| å¸–å­æ·»åŠ æ”¶è— | POST | `/api/favorites/posts/add` | æ–°å¢æ¥å£ âœ… |
| å¸–å­ç§»é™¤æ”¶è— | DELETE | `/api/favorites/posts/remove` | æ–°å¢æ¥å£ âœ… |
| æŸ¥è¯¢æ”¶è— | GET | `/api/favorites/` | è¿”å›ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªæ•°ç»„ï¼šå•†å“æ”¶è— + å¸–å­æ”¶è—ï¼Œå‰ç«¯è§£æ„ã€‚åŸè·¯ç”± `/api/favorites/user/favorites` âœ… |

---

#### 3.6 æ¨¡å—äº”ï¼šç”³è¯‰æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/appeals`

**è¯´æ˜**ï¼šç”¨æˆ·è§’åº¦æäº¤ç”³è¯‰çš„æ¥å£ã€‚ç”¨æˆ·æŸ¥çœ‹ç”³è¯‰åœ¨ä¿¡ç®±æ¨¡å—ã€ç®¡ç†å‘˜å¤„ç†ç”³è¯‰åœ¨ç®¡ç†å‘˜æ¨¡å—ã€‚

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| æäº¤ç”³è¯‰ | POST | `/api/appeals/publish` | ç”¨æˆ·æäº¤ç”³è¯‰ âœ… |
| æŸ¥è¯¢ç”³è¯‰ | GET | `/api/appeals/search` | ä¼ å‚ statusï¼š`pending`ï¼ˆå¾…å¤„ç†ï¼‰ã€`resolved`ï¼ˆå·²å¤„ç†ï¼‰ï¼Œä¸æä¾›å‚æ•°é»˜è®¤æœç´¢å…¨éƒ¨ç”³è¯‰ âœ… |

---

#### 3.7 æ¨¡å—å…­ï¼šæ ¡å›­å¢™æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/forum`

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| æ¡ä»¶æŸ¥è¯¢å¸–å­ | GET | `/api/forum/posts?campus=1&page=1&limit=10` | æ”¯æŒæ ¡åŒºã€åˆ†ç±»ã€å…³é”®è¯ç­‰å¤šæ¡ä»¶ç­›é€‰ âœ… |
| åˆ é™¤å¸–å­ | DELETE | `/api/forum/posts/delete` | ç”¨æˆ·å¯è½¯åˆ é™¤ï¼Œç®¡ç†å‘˜å¯ç¡¬åˆ é™¤ âœ… |
| å¸–å­äº’åŠ¨ | POST | `/api/forum/posts/interact` | ç‚¹èµã€è¯„è®ºï¼ˆç±»å‹é€šè¿‡å‚æ•°åŒºåˆ†ï¼‰âœ… |

---

#### 3.8 æ¨¡å—ä¸ƒï¼šä¿¡ç®±æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/messages`

**è¯´æ˜**ï¼š
- ç›®å‰ appeals å’Œ responses éƒ½åœ¨è¿™ä¸€æ¨¡å—
- appeals éœ€è¦æ·»åŠ  `read` çš„å·²è¯»çŠ¶æ€
- å»ºè®®å°†ä¸¤ä¸ªè¡¨çš„å±æ€§å¯¹é½ï¼Œæ·»åŠ å·²è¯»/æœªè¯»çŠ¶æ€ç­›é€‰

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·å–é€šçŸ¥ | GET | `/api/messages/` | åŒæ—¶è·å–ç”³è¯‰å’Œå›å¤çš„é€šçŸ¥ âœ… |
| ä¿®æ”¹é€šçŸ¥çŠ¶æ€ | PUT | `/api/messages/status` | ä¿®æ”¹å·²è¯»/æœªè¯»çŠ¶æ€ âœ… |

---

#### 3.9 æ¨¡å—å…«ï¼šå‘å¸ƒæ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/publish`

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| å‘å¸ƒå•†å“ | POST | `/api/publish/goods` | åŸè·¯ç”± `/api/posts/publish` âœ… |
| å‘å¸ƒå¸–å­ | POST | `/api/publish/posts` | æ–°å¢æ¥å£ âœ… |
| ç”Ÿæˆ AI æ¨¡æ¿ä¿¡æ¯ | POST | `/api/publish/template` | AI è‡ªåŠ¨ç”Ÿæˆå‘å¸ƒå†…å®¹ï¼Œprompt åç»­è¿˜éœ€ä¼˜åŒ– âœ… |

---

#### 3.10 æ¨¡å—ä¹ï¼šç®¡ç†å‘˜æ¨¡å—

**å‘½åç©ºé—´**ï¼š`/api/admin`

**è¯´æ˜**ï¼š
- å°†åŸæœ‰ `/api/users` ä¸­çš„ç”¨æˆ·ç®¡ç†æ¥å£åˆå¹¶åˆ°æ­¤æ¨¡å—
- æ­¤æ¨¡å—æœ‰è¾ƒå¤šéœ€è¦æ›´æ–°æ·»åŠ çš„æ¥å£
- å»ºè®®å…ˆå®Œæˆå…¶ä»–å†…å®¹ä¿®æ”¹ï¼Œæœ€åå†å¼€å‘è¿™å—

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| æœç´¢ç”¨æˆ· | GET | `/api/admin/search-user` | é€šè¿‡ QQ æœç´¢ç”¨æˆ·ï¼ŒåŸè·¯ç”± `/api/users/searchByQQ` âœ… |
| è·å–ç”¨æˆ·å‘å¸ƒå†å² | GET | `/api/admin/search-history` | æŸ¥çœ‹ç”¨æˆ·å‘å¸ƒå†å²æ˜¯å¦è¿è§„ âœ… |
| åˆ é™¤å•†å“ | DELETE | `/api/admin/posts/:post_id` | ç®¡ç†å‘˜åˆ é™¤å•†å“ âœ… |
| åˆ é™¤å¸–å­ | DELETE | `/api/admin/goods/:goods_id` | ç®¡ç†å‘˜åˆ é™¤å¸–å­ âœ… |
| ä¿®æ”¹ç”¨æˆ·ä¿¡ç”¨åˆ† | PUT | `/api/admin/credit` | åŸè·¯ç”± `/api/users/updateCredit` âœ… |
| è·å–ç”³è¯‰åˆ—è¡¨ | GET | `/api/admin/appeals` | ç®¡ç†å‘˜å¤„ç†ç”³è¯‰ï¼ŒåŸè·¯ç”± `/api/appeals/` âœ… |
| æ›´æ–°ç”³è¯‰çŠ¶æ€ | PUT | `/api/admin/appeals` | åŸè·¯ç”± `/api/appeals/:appeal_id` âœ… |
| å°ç¦ç”¨æˆ· | PUT | `/api/admin/ban` | ä¼ å‚å°ç¦æ—¶é•¿ âœ… |
| è§£å°ç”¨æˆ· | PUT | `/api/admin/unban` | è§£é™¤ç”¨æˆ·å°ç¦ âœ… |
| è·å–ç›‘æµ‹ä¿¡æ¯ | GET | `/api/admin/monitor` | æ–°å¢æ¥å£ï¼Œç”¨äºç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œè¿”å›å€¼å‚è€ƒç›‘æµ‹æ•°æ®éƒ¨åˆ† |
| è·å– AI è°ƒç”¨ç»Ÿè®¡ | GET | `/api/admin/ai/stats` | æ–°å¢æ¥å£ï¼Œç”¨äºè·å– AI è°ƒç”¨ç»Ÿè®¡æ•°æ® |
| è·å–çƒ­é—¨æœç´¢å…³é”®è¯ | GET | `/api/admin/search-keywords` | æ–°å¢æ¥å£ï¼Œç”¨äºè·å–çƒ­é—¨æœç´¢å…³é”®è¯åˆ—è¡¨ |
| è·å–å¹¿å‘Šåˆ—è¡¨ | GET | `/api/admin/ads` | æ–°å¢æ¥å£ï¼Œç”¨äºè·å–å¹¿å‘Šåˆ—è¡¨ |
| å¹¿å‘Šæ“ä½œ | POST | `/api/admin/ads` | æ–°å¢æ¥å£ï¼Œç”¨äºæ·»åŠ æˆ–ä¿®æ”¹å¹¿å‘Šä¿¡æ¯ |
| è·å–ä¼šå‘˜åˆ—è¡¨ | GET | `/api/admin/members` | æ–°å¢æ¥å£ï¼Œç”¨äºè·å–ä¼šå‘˜åˆ—è¡¨ |
| ä¼šå‘˜æ“ä½œ | POST | `/api/admin/members` | æ–°å¢æ¥å£ï¼Œç”¨äºæ·»åŠ æˆ–ä¿®æ”¹ä¼šå‘˜ä¿¡æ¯ |

---

## ğŸ“ è®¾è®¡æ–‡æ¡£

### 1. ä¸šåŠ¡æ ‡ç­¾è®¾è®¡

#### å•†å“æ ‡ç­¾åˆ†ç±»

å•†åŸæ¨¡å—çš„å•†å“æ ‡ç­¾è®¾è®¡ï¼Œç”¨äºå•†å“ç­›é€‰å’Œåˆ†ç±»å±•ç¤ºï¼š

| æ ‡ç­¾åç§° | è‹±æ–‡ | è¯´æ˜ | å…¸å‹ç¤ºä¾‹ |
|---------|------|------|---------|
| **æ•°ç ç”µå­** | electronics | ä»·å€¼è¾ƒé«˜çš„æ•°ç å’Œç”µå­è®¾å¤‡ | ç›¸æœºã€é¼ æ ‡ã€é”®ç›˜ã€æ˜¾ç¤ºå™¨ã€å¹³æ¿ã€è€³æœº |
| **å­¦ä¹ èµ„æ–™** | study | çº¸è´¨æˆ–ç”µå­çš„å­¦ä¹ ç›¸å…³èµ„æ–™ | ä¹¦ç±ã€ç¬”è®°ã€è¯•é¢˜ã€PPTã€è¯¾ä»¶ |
| **ç”Ÿæ´»ç”¨å“** | necessities | ä»·å€¼è¾ƒä½çš„æ—¥å¸¸ç”Ÿæ´»ç”¨å“ | æ”¶çº³æ¶ã€æ–‡å…·ã€æŠ¤å…·ã€å°ç¯ã€æ°´æ¯ |
| **ä»£åŠè·‘è…¿** | agency | æä¾›ä»£åŠå’Œè·‘è…¿æœåŠ¡ | ä»£è¯¾ç­¾åˆ°ã€ä½“è‚²æ‰“å¡ã€ä»£å–å¿«é€’ã€é€ä¸œè¥¿ |
| **å’¨è¯¢ç­”ç–‘** | consult | çº¿ä¸Šé—®ç­”æœåŠ¡ | ç»éªŒå’¨è¯¢ã€é—®é¢˜è§£ç­”ã€å­¦ä¹ æŒ‡å¯¼ |
| **è´¦å·ä¼šå‘˜** | account | å„ç±»è´¦å·å’Œä¼šå‘˜æœåŠ¡ | æ ¡å›­ç½‘ã€è§†é¢‘VIPã€æ¸¸æˆè´¦å·ã€è´­ç‰©å¡ |
| **é›¶é£Ÿ** | snacks | é›¶é£Ÿç±»å•†å“ | å„ç±»é›¶é£Ÿ |
| **å…¶ä»–** | others | æ— æ³•å½’ç±»çš„å•†å“ | ä¸åœ¨é¡µé¢è®¾ç½®é€‰é¡¹å¡ï¼Œä»…åœ¨å…¨éƒ¨å•†å“ä¸­æ˜¾ç¤º |

#### å¸–å­æ ‡ç­¾åˆ†ç±»

æ ¡å›­å¢™æ¨¡å—çš„å¸–å­æ ‡ç­¾è®¾è®¡ï¼Œç”¨äºå¸–å­ç­›é€‰å’Œåˆ†ç±»å±•ç¤ºï¼š

| æ ‡ç­¾åç§° | è‹±æ–‡ | è¯´æ˜ | å‘å¸ƒæƒé™ | å…¸å‹ç¤ºä¾‹ |
|---------|------|------|---------|---------|
| **æ–°é—»é€šçŸ¥** | news | å­¦æ ¡/å­¦é™¢/ç¤¾å›¢çš„å®˜æ–¹ä¿¡æ¯ | ç®¡ç†å‘˜æˆ–è®¤è¯ç”¨æˆ· | å­¦æ ¡é€šçŸ¥ã€å­¦é™¢å…¬å‘Šã€å®˜æ–¹æ¨æ–‡è½¬å‘ |
| **åæ§½å€¾è¯‰** | confide | æƒ…æ„Ÿå€¾è¯‰å’Œåæ§½å†…å®¹ | å…¨éƒ¨ç”¨æˆ· | å­¦ä¹ å‹åŠ›ã€ç”Ÿæ´»æ„Ÿæ‚Ÿã€å¿ƒæƒ…åˆ†äº« |
| **å­¦ä¹ èµ„æ–™** | study | å­¦ä¹ ç›¸å…³çš„èµ„æ–™å’Œç»éªŒåˆ†äº« | å…¨éƒ¨ç”¨æˆ· | è€ƒç ”ç»éªŒã€ä¿ç ”ç»éªŒã€å°±ä¸šç»éªŒã€å¤ä¹ èµ„æ–™ã€é€‰è¯¾å»ºè®® |
| **å’¨è¯¢ç­”ç–‘** | consult | è¯¢é—®å’Œè§£ç­”å„ç±»é—®é¢˜ | å…¨éƒ¨ç”¨æˆ· | ç»éªŒå’¨è¯¢ã€é—®é¢˜æ±‚åŠ©ã€ç­”ç–‘è§£æƒ‘ |
| **äº¤å‹ç»„é˜Ÿ** | team | ç¤¾äº¤å’Œç»„é˜Ÿç›¸å…³ | å…¨éƒ¨ç”¨æˆ· | æäººã€æ‹¼å•ã€æ‹¼è½¦ã€ç»„é˜Ÿã€æ´»åŠ¨å¬é›† |
| **ç”Ÿæ´»å¨±ä¹** | entertainment | ç”Ÿæ´»å¨±ä¹ç›¸å…³å†…å®¹ | å…¨éƒ¨ç”¨æˆ· | ç¾é£Ÿæ¨èã€ç”µå½±åˆ†äº«ã€éŸ³ä¹æ¨èã€æ¸¸æˆç»„é˜Ÿã€ä¼‘é—²æ´»åŠ¨ |
| **å…¶ä»–** | others | æ— æ³•å½’ç±»çš„å¸–å­ | å…¨éƒ¨ç”¨æˆ· | ä¸åœ¨é¡µé¢è®¾ç½®é€‰é¡¹å¡ï¼Œä»…åœ¨å…¨éƒ¨å¸–å­ä¸­æ˜¾ç¤º |

#### æ ‡ç­¾ä½¿ç”¨è§„èŒƒ

**å‰ç«¯ä½¿ç”¨**ï¼š
```typescript
// å•†å“æ ‡ç­¾æšä¸¾
enum GoodsTag {
  ELECTRONICS = 'electronics',    // æ•°ç ç”µå­
  STUDY = 'study',                // å­¦ä¹ èµ„æ–™
  NECESSITIES = 'necessities',    // ç”Ÿæ´»ç”¨å“
  AGENCY = 'agency',              // ä»£åŠè·‘è…¿
  CONSULT = 'consult',            // å’¨è¯¢ç­”ç–‘
  ACCOUNT = 'account',            // è´¦å·ä¼šå‘˜
  SNACKS = 'snacks',              // é›¶é£Ÿ
  OTHERS = 'others'               // å…¶ä»–
}

// å¸–å­æ ‡ç­¾æšä¸¾
enum PostTag {
  NEWS = 'news',                  // æ–°é—»é€šçŸ¥
  CONFIDE = 'confide',            // åæ§½å€¾è¯‰
  STUDY = 'study',                // å­¦ä¹ èµ„æ–™
  CONSULT = 'consult',            // å’¨è¯¢ç­”ç–‘
  TEAM = 'team',                  // äº¤å‹ç»„é˜Ÿ
  ENTERTAINMENT = 'entertainment', // ç”Ÿæ´»å¨±ä¹
  OTHERS = 'others'               // å…¶ä»–
}
```

**åç«¯å­˜å‚¨**ï¼š
- æ•°æ®åº“å­—æ®µï¼š`tag` (VARCHAR)
- å­˜å‚¨å€¼ï¼šä½¿ç”¨è‹±æ–‡æ ‡è¯†ç¬¦ï¼ˆå¦‚ `electronics`ã€`news`ï¼‰
- æŸ¥è¯¢ç­›é€‰ï¼šæ”¯æŒæŒ‰æ ‡ç­¾ç­›é€‰å•†å“/å¸–å­

**æ•°æ®ç»Ÿè®¡**ï¼š
- ç»Ÿè®¡å„æ ‡ç­¾çš„å‘å¸ƒæ•°é‡
- ç»Ÿè®¡å„æ ‡ç­¾çš„æ”¶è—æ•°é‡
- ç”¨äº Dashboard å±•ç¤ºæ ‡ç­¾åˆ†å¸ƒ

---

### 2. ç›‘æµ‹æ•°æ®è®¾è®¡

Dashboard åå°ç›‘æ§æ•°æ®çš„å®Œæ•´è®¾è®¡æ–¹æ¡ˆï¼Œç”¨äºç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œç”¨æˆ·è¡Œä¸ºåˆ†æã€‚

#### API æ¥å£è®¾è®¡

**ä¸»æ¥å£**: `/api/admin/stats`

è¿”å›æ‰€æœ‰ç›‘æµ‹æ•°æ®ï¼ŒåŒ…æ‹¬æ€»ä½“ç»Ÿè®¡å’Œè¿‘ 7 å¤©è¯¦ç»†æ•°æ®ï¼š

```json
{
  "message": "äº‹ä»¶ç»Ÿè®¡æ•°æ®è·å–æˆåŠŸ",
  "data": {
    // ========== æ€»ä½“ç»Ÿè®¡ ==========
    "visit": 1000,              // æ€»è®¿é—®æ¬¡æ•°
    "users": 300,               // æ€»ç”¨æˆ·æ•°
    "posts": 150,               // æ€»å¸–å­æ•°
    "goods": 200,               // æ€»å•†å“æ•°
    "banned_users": 5,          // è¢«å°ç¦ç”¨æˆ·æ•°
    "violation": 30,            // è¿è§„æ¬¡æ•°ï¼ˆresponseè¡¨ä¸­response_typeä¸º"violation"çš„è®°å½•ï¼‰
    "completed_transaction": 120, // å®Œæˆäº¤æ˜“æ€»æ¬¡æ•°
    "membership": 5,            // ä¼šå‘˜å¼€é€šæ€»æ¬¡æ•°
    "ad_click": 10,             // å¹¿å‘Šç‚¹å‡»æ€»æ¬¡æ•°
    "ad_add": 3,                // å¹¿å‘Šæ·»åŠ æ€»æ¬¡æ•°
    
    // ========== å•†å“æ ‡ç­¾ç»Ÿè®¡ ==========
    "publish_goods_tag": {
      "electronics": 45,        // æ•°ç ç”µå­
      "study": 20,              // å­¦ä¹ èµ„æ–™
      "necessities": 15,        // ç”Ÿæ´»ç”¨å“
      "agency": 5,              // ä»£åŠè·‘è…¿
      "consult": 10,            // å’¨è¯¢ç­”ç–‘
      "account": 3,             // è´¦å·ä¼šå‘˜
      "snacks": 7,              // é›¶é£Ÿ
      "others": 8               // å…¶ä»–
    },
    
    "favorite_goods_tag": {
      "electronics": 50,
      "study": 25,
      "necessities": 12,
      "agency": 8,
      "consult": 15,
      "account": 5,
      "snacks": 10,
      "others": 5
    },
    
    // ========== å¸–å­æ ‡ç­¾ç»Ÿè®¡ ==========
    "publish_post_tag": {
      "news": 45,               // æ–°é—»é€šçŸ¥
      "confide": 15,            // åæ§½å€¾è¯‰
      "study": 20,              // å­¦ä¹ èµ„æ–™
      "consult": 10,            // å’¨è¯¢ç­”ç–‘
      "team": 3,                // äº¤å‹ç»„é˜Ÿ
      "entertainment": 12,      // ç”Ÿæ´»å¨±ä¹
      "others": 8               // å…¶ä»–
    },
    
    "favorite_post_tag": {
      "news": 40,
      "confide": 18,
      "study": 25,
      "consult": 12,
      "team": 5,
      "entertainment": 15,
      "others": 5
    },
    
    // ========== è¿‘ 7 å¤©ç»Ÿè®¡ ==========
    "recent_7_days": {
      "visit": 100,             // 7å¤©è®¿é—®æ¬¡æ•°
      "active_users": 50,       // æ´»è·ƒç”¨æˆ·æ•°ï¼ˆåŸºäºinfoå­—æ®µå»é‡ï¼Œ7å¤©ä¸­è®¿é—®>7æ¬¡çš„ç”¨æˆ·ï¼‰
      "completed_transaction": 20,
      "membership": 2,
      "ad_click": 5,
      "ad_add": 1,
      "register": 3,            // æ–°æ³¨å†Œç”¨æˆ·æ•°
      "goods": 10,              // æ–°å‘å¸ƒå•†å“æ•°
      "posts": 15,              // æ–°å‘å¸ƒå¸–å­æ•°
      
      // æ¯å‘¨æ ‡ç­¾ç»Ÿè®¡ï¼ˆåŒä¸Šæ ¼å¼ï¼‰
      "publish_goods_tag": { /* ... */ },
      "favorite_goods_tag": { /* ... */ },
      "publish_post_tag": { /* ... */ },
      "favorite_post_tag": { /* ... */ },
      
      // ========== æ¯æ—¥è¯¦ç»†è®°å½•ï¼ˆç”¨äºç»˜åˆ¶æŠ˜çº¿å›¾ï¼‰ ==========
      "daily_records": [
        {
          "date": "2025-10-15",
          "visit": 45,
          "ad_click": 23,
          "completed_transaction": 12,
          "register": 20,
          "goods": 15,
          "posts": 18,
          "membership": 1
        },
        {
          "date": "2025-10-16",
          "visit": 52,
          "ad_click": 28,
          "completed_transaction": 15,
          "register": 18,
          "goods": 12,
          "posts": 20,
          "membership": 0
        }
        // ... å…± 7 æ¡è®°å½•
      ]
    }
  }
}
```

#### æ•°æ®å­—æ®µè¯´æ˜

| å­—æ®µå | è¯´æ˜ | æ•°æ®æ¥æº |
|--------|------|---------|
| `visit` | è®¿é—®æ¬¡æ•°ï¼Œç»Ÿè®¡åŒä¸€ç”¨æˆ·å¤šæ¬¡è®¿é—® | event_logs è¡¨ event_type='visit' |
| `users` | ç”¨æˆ·æ€»æ•° | users è¡¨ COUNT(*) |
| `posts` | å¸–å­æ€»æ•° | posts è¡¨ COUNT(*) |
| `goods` | å•†å“æ€»æ•° | goods è¡¨ COUNT(*) |
| `banned_users` | è¢«å°ç¦ç”¨æˆ·æ•° | users è¡¨ is_banned=1 |
| `violation` | è¿è§„æ¬¡æ•° | responses è¡¨ response_type='violation' |
| `active_users` | æ´»è·ƒç”¨æˆ·æ•° | event_logs è¡¨ 7å¤©å†…è®¿é—®>7æ¬¡ï¼ŒåŸºäºinfoå­—æ®µå»é‡ |
| `publish_goods_tag` | å•†å“å‘å¸ƒæ ‡ç­¾ç»Ÿè®¡ | goods è¡¨æŒ‰tagå­—æ®µåˆ†ç»„ç»Ÿè®¡ |
| `favorite_goods_tag` | å•†å“æ”¶è—æ ‡ç­¾ç»Ÿè®¡ | favorites è¡¨å…³è”goodsè¡¨æŒ‰tagç»Ÿè®¡ |
| `publish_post_tag` | å¸–å­å‘å¸ƒæ ‡ç­¾ç»Ÿè®¡ | posts è¡¨æŒ‰tagå­—æ®µåˆ†ç»„ç»Ÿè®¡ |
| `favorite_post_tag` | å¸–å­æ”¶è—æ ‡ç­¾ç»Ÿè®¡ | favorites è¡¨å…³è”postsè¡¨æŒ‰tagç»Ÿè®¡ |
| `completed_transaction` | å®Œæˆäº¤æ˜“æ¬¡æ•° | goods è¡¨ status='completed' |
| `membership` | ä¼šå‘˜å¼€é€šæ¬¡æ•° | membership_records è¡¨ COUNT(*) |
| `ad_click` | å¹¿å‘Šç‚¹å‡»æ¬¡æ•° | event_logs è¡¨ event_type='ad_click' |
| `ad_add` | å¹¿å‘Šæ·»åŠ æ¬¡æ•° | advertisements è¡¨ COUNT(*) |

#### å®ç°æ–¹å¼

**æ•°æ®è®°å½•**ï¼š
1. **å‰ç«¯è¯·æ±‚æ—¶è®°å½•**ï¼š
   - è®¿é—®æ¬¡æ•°ï¼šæ¯æ¬¡é¡µé¢åŠ è½½æ—¶å‘é€ç»Ÿè®¡è¯·æ±‚
   - å¹¿å‘Šç‚¹å‡»ï¼šç‚¹å‡»å¹¿å‘Šæ—¶è®°å½•
   
2. **åç«¯æ¥å£è®°å½•**ï¼š
   - æ³¨å†Œã€å‘å¸ƒã€äº¤æ˜“å®Œæˆç­‰æ“ä½œè‡ªåŠ¨è®°å½•
   - ä½¿ç”¨ä¸­é—´ä»¶ç»Ÿä¸€å¤„ç†

3. **æ•°æ®åº“æŸ¥è¯¢**ï¼š
   - ç”¨æˆ·æ•°ã€å•†å“æ•°ã€å¸–å­æ•°ç­‰ä»æ•°æ®åº“ç›´æ¥ç»Ÿè®¡
   - æ ‡ç­¾åˆ†å¸ƒé€šè¿‡ GROUP BY æŸ¥è¯¢

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- ä½¿ç”¨ Redis ç¼“å­˜ç»Ÿè®¡ç»“æœï¼Œæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡
- æ—¥è®¿é—®é‡ç­‰é«˜é¢‘æ•°æ®ä½¿ç”¨ Redis è®¡æ•°å™¨
- Dashboard æ•°æ®å¼‚æ­¥åŠ è½½ï¼Œé¿å…é˜»å¡

#### æœç´¢å…³é”®è¯ç»Ÿè®¡ï¼ˆå¾…å®ç°ï¼‰

**API**: `/api/admin/search-keywords`

**è¯´æ˜**ï¼š
- ç›®å‰æš‚ä¸å®ç°ï¼Œç­‰æœç´¢è¯ç®—æ³•å®Œå–„åå†è€ƒè™‘
- éœ€è¦è§£å†³æœç´¢è¯æ±¡æŸ“é—®é¢˜
- æ•°æ®åº“è®¾è®¡ï¼š`search_keywords` è¡¨è®°å½•æ‰€æœ‰æœç´¢è¯
- å‰ç«¯å±•ç¤ºï¼šè¯äº‘å›¾å±•ç¤ºé«˜é¢‘æœç´¢è¯

---

### 3. ç‰ˆæœ¬è§„åˆ’

é¡¹ç›®é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆSemantic Versioningï¼‰ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·`

#### æµ‹è¯•ç‰ˆæœ¬

**v0.1.0-alpha (å†…éƒ¨æµ‹è¯•ç‰ˆ)**

**å‘å¸ƒæ—¶é—´**: 2025å¹´10æœˆ21æ—¥

**ä¸»è¦åŠŸèƒ½**: å®ç°é¡¹ç›®åŸºæœ¬åŠŸèƒ½ï¼Œæ­å»ºæ¡†æ¶ï¼Œä½œä¸ºæ¼”ç¤ºç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€å¸å¼•åˆä½œ

**æ ¸å¿ƒæ¨¡å—**ï¼š
- **User æ¨¡å—**
  - User (ç”¨æˆ·ä¿¡æ¯)
  - Auth (ç™»å½•æ³¨å†Œ)
- **Admin æ¨¡å—** (ç®¡ç†å‘˜åŠŸèƒ½)
- **Main æ¨¡å—**
  - Market (å•†åŸ)
  - Forum (æ ¡å›­å¢™)
- **Record æ¨¡å—**
  - Message (ä¿¡ç®±)
  - History (å†å²)
  - Favorite (æ”¶è—)

**æœåŠ¡å·å‡†å¤‡**ï¼š
- ç¡®å®šå„ç±»æ¨æ–‡æ¨¡æ¿
- å·¥å•è®¢é˜…åŠŸèƒ½
- ç¡®å®šå®£å‘è®¡åˆ’

---

**v0.2.0-beta (å…¬æµ‹ç‰ˆ)**

**é¢„æœŸæ—¶é—´**: 2025å¹´10æœˆæœ«è‡³11æœˆåˆ

**ç‰ˆæœ¬ç›®æ ‡**ï¼š
- åœ¨å†…éƒ¨æµ‹è¯•åŸºç¡€ä¸Šï¼Œå®Œå–„åŠŸèƒ½
- ä¼˜åŒ–ç»†èŠ‚ã€åŠæ—¶ä¿®å¤æµ‹è¯•ä¸­å‡ºç°çš„é—®é¢˜

**å®Œå–„åŠŸèƒ½**ï¼š
- **ä¸ªæ€§åŒ–åŠŸèƒ½**
  - ä¸»é¢˜é£æ ¼åˆ‡æ¢
  - å¤´åƒæ¡†ç³»ç»Ÿï¼ˆå¾…å®šï¼‰
  - ç”¨æˆ·ç­‰çº§ç³»ç»Ÿï¼ˆå¾…å®šï¼‰
- **æ¸¸å®¢æ¨¡å¼**ï¼šæœªç™»å½•ç”¨æˆ·å¯æµè§ˆéƒ¨åˆ†å†…å®¹
- **å¹¿å‘Šç³»ç»Ÿ**ï¼šå•†å“/å¸–å­å¹¿å‘Šä½
- **ä¼šå‘˜åˆ¶åº¦**ï¼šVIP/PRO åŠŸèƒ½

---

#### æ­£å¼ç‰ˆæœ¬

**v1.0.0 (é¦–ä¸ªæ­£å¼ç‰ˆ)**

**é¢„æœŸæ—¶é—´**: 2025å¹´11æœˆè‡³12æœˆï¼ˆè§†å®¡æ ¸ä¸é¡¹ç›®è¿›å±•è€Œå®šï¼‰

**æ–°å¢åŠŸèƒ½**ï¼š
- **å¤šç«¯é€‚é…**
  - H5 ç«¯é¡µé¢é€‚é…
  - å¾®ä¿¡å°ç¨‹åºç«¯
  - å“åº”å¼è®¾è®¡
- **é¡¹ç›®æ¨¡æ¿**ï¼šå¯å®Œæ•´æ‰“åŒ…å‡ºå”®çš„é¡¹ç›®æ¨¡æ¿

---

### 4. é¡µé¢åˆ†äº«æ–¹æ¡ˆ

é¡µé¢åˆ†äº«åŠŸèƒ½çš„ä¸‰ç§å®ç°æ–¹æ¡ˆè®¾è®¡ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚

#### æ–¹æ¡ˆä¸€ï¼šåŸºç¡€ç‰ˆï¼ˆå¿…åšï¼‰

**ç›®æ ‡**ï¼šä¿è¯ç”¨æˆ·è‡³å°‘å¯ä»¥æŠŠé¡µé¢é“¾æ¥ä¼ æ’­å‡ºå»

**åŠŸèƒ½è®¾è®¡**ï¼š
- ç”¨æˆ·ç‚¹å‡»é¡µé¢ä¸Šçš„ã€Œåˆ†äº«æŒ‰é’®ã€
- å¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºå½“å‰é¡µé¢é“¾æ¥
- æä¾›ã€Œå¤åˆ¶ã€åŠŸèƒ½
- ç”¨æˆ·æ‰‹åŠ¨å°†é“¾æ¥ç²˜è´´åˆ°å¾®ä¿¡ã€QQã€å¾®åšç­‰ç¤¾äº¤å¹³å°

**å®ç°æ–¹å¼**ï¼š

**å‰ç«¯å®ç°**ï¼š
```typescript
// åˆ†äº«ç»„ä»¶
const ShareModal = ({ url, title }: { url: string, title: string }) => {
  const [visible, setVisible] = useState(false);
  
  // å¤åˆ¶é“¾æ¥
  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(url);
      message.success('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
    } catch (err) {
      // å…¼å®¹æ—§æµè§ˆå™¨
      const input = document.createElement('input');
      input.value = url;
      document.body.appendChild(input);
      input.select();
      document.execCommand('copy');
      document.body.removeChild(input);
      message.success('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
    }
  };
  
  return (
    <Modal
      visible={visible}
      title="åˆ†äº«"
      onCancel={() => setVisible(false)}
    >
      <div className="share-content">
        <p>{title}</p>
        <Input value={url} readOnly />
        <Button onClick={handleCopy}>å¤åˆ¶é“¾æ¥</Button>
      </div>
    </Modal>
  );
};
```

**åç«¯æ”¯æŒ**ï¼ˆå¯é€‰ï¼‰ï¼š
- å¦‚éœ€çŸ­é“¾æˆ–å¸¦ä¸šåŠ¡å‚æ•°ï¼ˆå¦‚åˆ†äº«ç ï¼‰ï¼Œæä¾› API è¿”å›åˆ†äº«é“¾æ¥
- ç¤ºä¾‹ï¼š`POST /api/share/generate` â†’ è¿”å›çŸ­é“¾

**ä¼˜ç‚¹**ï¼š
- âœ… å®ç°ç®€å•ï¼Œå¿«é€Ÿä¸Šçº¿
- âœ… å…¼å®¹æ€§å¼ºï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ
- âœ… ä¸ä¾èµ–ç¬¬ä¸‰æ–¹å¹³å°

**ç¼ºç‚¹**ï¼š
- âŒ ç”¨æˆ·ä½“éªŒå·®ï¼Œéœ€è¦æ‰‹åŠ¨ç²˜è´´
- âŒ åˆ†äº«å¡ç‰‡ä¸å¯æ§ï¼ˆç”±å¹³å°è‡ªåŠ¨ç”Ÿæˆï¼‰
- âŒ æ— æ³•ç»Ÿè®¡åˆ†äº«æ•°æ®

---

#### æ–¹æ¡ˆäºŒï¼šç³»ç»Ÿåˆ†äº«ï¼ˆå¯é€‰ï¼‰

**ç›®æ ‡**ï¼šåˆ©ç”¨ç³»ç»Ÿæˆ–æµè§ˆå™¨çš„åˆ†äº«èƒ½åŠ›ï¼Œé™ä½ç”¨æˆ·æ“ä½œé—¨æ§›

**åŠŸèƒ½è®¾è®¡**ï¼š
- ç”¨æˆ·ç‚¹å‡»ã€Œåˆ†äº«æŒ‰é’®ã€
- å¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºé¡µé¢é“¾æ¥
- æä¾›ã€Œåˆ†äº«åˆ°å¾®ä¿¡/QQ/å¾®åšã€ç­‰æŒ‰é’®
- ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°ç›®æ ‡å¹³å°çš„åˆ†äº«æ¥å£

**å®ç°æ–¹å¼**ï¼š

**PC ç«¯ - æ„é€ å¹³å°åˆ†äº« URL**ï¼ˆéå¿…è¦ï¼‰ï¼š
```typescript
// åˆ†äº«åˆ° QQ
const shareToQQ = (url: string, title: string) => {
  const shareUrl = `https://connect.qq.com/widget/shareqq/index.html?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`;
  window.open(shareUrl, '_blank');
};

// åˆ†äº«åˆ°å¾®åš
const shareToWeibo = (url: string, title: string) => {
  const shareUrl = `https://service.weibo.com/share/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`;
  window.open(shareUrl, '_blank');
};

// åˆ†äº«ç»„ä»¶
const ShareButtons = ({ url, title }: ShareProps) => {
  return (
    <div className="share-buttons">
      <Button onClick={() => shareToQQ(url, title)}>
        <QQIcon /> åˆ†äº«åˆ°QQ
      </Button>
      <Button onClick={() => shareToWeibo(url, title)}>
        <WeiboIcon /> åˆ†äº«åˆ°å¾®åš
      </Button>
    </div>
  );
};
```

**ç§»åŠ¨ç«¯ - ä½¿ç”¨ navigator.share()**ï¼š
```typescript
// Web Share API
const handleShare = async () => {
  // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
  if (navigator.share) {
    try {
      await navigator.share({
        title: 'å•†å“æ ‡é¢˜',
        text: 'å•†å“æè¿°',
        url: window.location.href
      });
      message.success('åˆ†äº«æˆåŠŸ');
    } catch (err) {
      if (err.name !== 'AbortError') {
        // ç”¨æˆ·å–æ¶ˆä¸æç¤ºé”™è¯¯
        message.error('åˆ†äº«å¤±è´¥');
      }
    }
  } else {
    // ä¸æ”¯æŒåˆ™å›é€€åˆ°æ–¹æ¡ˆä¸€
    handleCopyLink();
  }
};
```

**åç«¯æ”¯æŒ**ï¼š
- æä¾›ä¸“é—¨çš„**åˆ†äº«è½åœ°é¡µ**ï¼ŒåŒ…å«å®Œæ•´çš„ meta æ ‡ç­¾
- ä¿è¯å¹³å°æŠ“å–æ—¶èƒ½å±•ç¤ºæ­£ç¡®çš„æ ‡é¢˜ã€æè¿°ã€å›¾ç‰‡

```html
<!-- åˆ†äº«è½åœ°é¡µ HTML -->
<!DOCTYPE html>
<html>
<head>
  <meta property="og:title" content="å•†å“æ ‡é¢˜" />
  <meta property="og:description" content="å•†å“æè¿°" />
  <meta property="og:image" content="å•†å“å›¾ç‰‡URL" />
  <meta property="og:url" content="å½“å‰é¡µé¢URL" />
</head>
<body>
  <!-- é¡µé¢å†…å®¹æˆ–è·³è½¬åˆ°app -->
</body>
</html>
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ“ä½œä¾¿æ·ï¼Œå‡å°‘ç”¨æˆ·æ“ä½œæ­¥éª¤
- âœ… ç§»åŠ¨ç«¯ä½“éªŒå¥½ï¼ˆè°ƒèµ·ç³»ç»Ÿåˆ†äº«é¢æ¿ï¼‰
- âœ… å¯ä»¥ç»Ÿè®¡åˆ†äº«æ¬¡æ•°

**ç¼ºç‚¹**ï¼š
- âŒ `navigator.share()` å…¼å®¹æ€§å·®ï¼š
  - ä¸æ”¯æŒ Firefox
  - ä¸æ”¯æŒå„å¤§è€æ—§ç‰ˆæœ¬æµè§ˆå™¨
  - å›½å†… app å†…ç½®æµè§ˆå™¨æ”¯æŒä¸ä½³
- âŒ åˆ†äº«å¡ç‰‡ä¾èµ–å¹³å°è‡ªåŠ¨ç”Ÿæˆï¼Œå†…å®¹å¯æ§æ€§æœ‰é™
- âŒ PC ç«¯åˆ†äº« URL å¯èƒ½è¢«å¹³å°å°ç¦

---

#### æ–¹æ¡ˆä¸‰ï¼šSDK é›†æˆï¼ˆå¯é€‰ï¼‰

**ç›®æ ‡**ï¼šå®ç°é«˜åº¦å¯æ§çš„åˆ†äº«ä½“éªŒï¼Œæ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜ã€æè¿°ã€å›¾ç‰‡

**åŠŸèƒ½è®¾è®¡**ï¼š
- ç”¨æˆ·ç‚¹å‡»ã€Œåˆ†äº«æŒ‰é’®ã€
- å¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºåˆ†äº«é€‰é¡¹
- æä¾›ã€Œåˆ†äº«åˆ°å¾®ä¿¡/QQ/å¾®åšã€ç­‰é€‰é¡¹
- åˆ†äº«æ—¶å±•ç¤ºå¼€å‘è€…è‡ªå®šä¹‰çš„åˆ†äº«å¡ç‰‡å†…å®¹

**å®ç°æ–¹å¼**ï¼š

**å‰ç«¯æ¥å…¥ SDK**ï¼š

**å¾®ä¿¡ JS-SDK**ï¼š
```typescript
// 1. å¼•å…¥å¾®ä¿¡ JS-SDK
import wx from 'weixin-js-sdk';

// 2. é…ç½®ç­¾å
const configWxShare = async () => {
  // ä»åç«¯è·å–ç­¾åä¿¡æ¯
  const { appId, timestamp, nonceStr, signature } = await api.get('/api/share/wx-config');
  
  wx.config({
    appId,
    timestamp,
    nonceStr,
    signature,
    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData']
  });
  
  wx.ready(() => {
    // è‡ªå®šä¹‰åˆ†äº«ç»™æœ‹å‹
    wx.updateAppMessageShareData({
      title: 'å•†å“æ ‡é¢˜',
      desc: 'å•†å“æè¿°',
      link: window.location.href,
      imgUrl: 'å•†å“å›¾ç‰‡URL',
      success: () => message.success('åˆ†äº«æˆåŠŸ')
    });
    
    // è‡ªå®šä¹‰åˆ†äº«åˆ°æœ‹å‹åœˆ
    wx.updateTimelineShareData({
      title: 'å•†å“æ ‡é¢˜',
      link: window.location.href,
      imgUrl: 'å•†å“å›¾ç‰‡URL',
      success: () => message.success('åˆ†äº«æˆåŠŸ')
    });
  });
};

// 3. é¡µé¢åŠ è½½æ—¶é…ç½®
useEffect(() => {
  configWxShare();
}, []);
```

**QQ SDK**ï¼š
```typescript
// å¼•å…¥ QQ äº’è” JS-SDK
// ç±»ä¼¼å¾®ä¿¡çš„é…ç½®æ–¹å¼
```

**åç«¯ç­¾åæœåŠ¡**ï¼š

**å¾®ä¿¡ç­¾å API**ï¼š
```javascript
// /api/share/wx-config
router.get('/wx-config', async (req, res) => {
  const url = req.query.url;
  
  // 1. è·å– access_tokenï¼ˆç¼“å­˜2å°æ—¶ï¼‰
  let accessToken = await redis.get('wx_access_token');
  if (!accessToken) {
    const tokenRes = await axios.get(
      `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${APPID}&secret=${SECRET}`
    );
    accessToken = tokenRes.data.access_token;
    await redis.setex('wx_access_token', 7200, accessToken);
  }
  
  // 2. è·å– jsapi_ticketï¼ˆç¼“å­˜2å°æ—¶ï¼‰
  let ticket = await redis.get('wx_jsapi_ticket');
  if (!ticket) {
    const ticketRes = await axios.get(
      `https://api.weixin.qq.com/cgi-bin/ticket/getjsapi_ticket?access_token=${accessToken}`
    );
    ticket = ticketRes.data.ticket;
    await redis.setex('wx_jsapi_ticket', 7200, ticket);
  }
  
  // 3. ç”Ÿæˆç­¾å
  const timestamp = Math.floor(Date.now() / 1000);
  const nonceStr = crypto.randomBytes(16).toString('hex');
  const string1 = `jsapi_ticket=${ticket}&noncestr=${nonceStr}&timestamp=${timestamp}&url=${url}`;
  const signature = crypto.createHash('sha1').update(string1).digest('hex');
  
  res.json({
    appId: APPID,
    timestamp,
    nonceStr,
    signature
  });
});
```

**ä¼˜ç‚¹**ï¼š
- âœ… åˆ†äº«å¡ç‰‡å®Œå…¨å¯æ§ï¼Œå¯æ”¯æŒä¸ªæ€§åŒ–
- âœ… ç”¨æˆ·ä½“éªŒæœ€ä½³ï¼Œä¸€é”®åˆ†äº«
- âœ… å¯ä»¥è·å–è¯¦ç»†çš„åˆ†äº«æ•°æ®
- âœ… æ”¯æŒåˆ†äº«å›è°ƒï¼Œå¯åšåˆ†äº«å¥–åŠ±

**ç¼ºç‚¹**ï¼š
- âŒ æ¥å…¥å¤æ‚ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒå¹³å°åˆ†åˆ«å¼€å‘
- âŒ åç«¯éœ€è¦å‚ä¸ï¼Œç»´æŠ¤ token å’Œç­¾å
- âŒ éœ€è¦å¹³å°å®¡æ ¸ï¼ˆå¦‚å¾®ä¿¡éœ€è¦è®¤è¯å…¬ä¼—å·ï¼‰
- âŒ ä»…åœ¨å¯¹åº”å¹³å°çš„æµè§ˆå™¨å†…æœ‰æ•ˆï¼ˆå¦‚å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼‰

---

#### æ–¹æ¡ˆé€‰æ‹©å»ºè®®

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| **MVP é˜¶æ®µ** | æ–¹æ¡ˆä¸€ | å¿«é€Ÿä¸Šçº¿ï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚ |
| **æµ‹è¯•ç‰ˆæœ¬** | æ–¹æ¡ˆä¸€ + æ–¹æ¡ˆäºŒ | æå‡ç§»åŠ¨ç«¯ä½“éªŒï¼ŒPCç«¯ä¿æŒç®€å• |
| **æ­£å¼ç‰ˆæœ¬** | æ–¹æ¡ˆä¸€ + æ–¹æ¡ˆäºŒ + æ–¹æ¡ˆä¸‰ | å®Œæ•´ä½“éªŒï¼Œåœ¨å¾®ä¿¡ç”Ÿæ€å†…ä½¿ç”¨ SDK |
| **H5/å°ç¨‹åº** | æ–¹æ¡ˆä¸‰ | å¾®ä¿¡ç”Ÿæ€å†…å¿…é¡»ä½¿ç”¨ SDK |

**å®æ–½å»ºè®®**ï¼š
1. **v0.1.0-alpha**: å®ç°æ–¹æ¡ˆä¸€ï¼ˆå¤åˆ¶é“¾æ¥ï¼‰
2. **v0.2.0-beta**: å¢åŠ æ–¹æ¡ˆäºŒï¼ˆç§»åŠ¨ç«¯ç³»ç»Ÿåˆ†äº«ï¼‰
3. **v1.0.0**: å¢åŠ æ–¹æ¡ˆä¸‰ï¼ˆå¾®ä¿¡ç”Ÿæ€SDKï¼‰

**æ³¨æ„äº‹é¡¹**ï¼š
- æ‰€æœ‰æ–¹æ¡ˆéƒ½éœ€è¦è®°å½•åˆ†äº«æ¬¡æ•°ï¼ˆåŸ‹ç‚¹ç»Ÿè®¡ï¼‰
- åˆ†äº«é“¾æ¥å¸¦ä¸Šåˆ†äº«äººIDï¼Œç”¨äºç»Ÿè®¡å’Œåˆ†äº«å¥–åŠ±
- è½åœ°é¡µéœ€è¦åšå¥½ SEO ä¼˜åŒ–å’Œ meta æ ‡ç­¾

---

### 5. å›¾æ ‡ç³»ç»Ÿè®¾è®¡

é¡¹ç›®é‡‡ç”¨ç»Ÿä¸€çš„å›¾æ ‡ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ SVG å’Œ iconfont åŒæ–¹æ¡ˆï¼Œé€šè¿‡ç¯å¢ƒå˜é‡çµæ´»åˆ‡æ¢ã€‚

#### ç³»ç»Ÿæ¶æ„

**æ ¸å¿ƒç»„ä»¶**ï¼š
- `Icon.tsx` - ç»Ÿä¸€å›¾æ ‡ç»„ä»¶
- `iconConfig.ts` - å›¾æ ‡é…ç½®ä¸­å¿ƒ
- `assets/*.svg` - SVG å›¾æ ‡èµ„æº
- `assets/fonts/` - iconfont å­—ä½“æ–‡ä»¶

**æŠ€æœ¯ç‰¹æ€§**ï¼š
- åŒæ–¹æ¡ˆæ”¯æŒï¼šSVGï¼ˆé»˜è®¤ï¼‰/ iconfont å¯åˆ‡æ¢
- å“åº”å¼è®¾è®¡ï¼šä½¿ç”¨ `px2rem` ç¡®ä¿è·¨è®¾å¤‡ä¸€è‡´æ€§
- ç±»å‹å®‰å…¨ï¼šTypeScript ç±»å‹çº¦æŸ
- åˆ«åç³»ç»Ÿï¼šç®€åŒ–å¸¸ç”¨å›¾æ ‡å‘½å

#### å›¾æ ‡ä½¿ç”¨

**åŸºæœ¬ç”¨æ³•**ï¼š
```tsx
import Icon from '@/components/Icon/Icon';

// åŸºç¡€ä½¿ç”¨
<Icon name="search" size={24} />

// å¸¦é¢œè‰²ï¼ˆä»… iconfontï¼‰
<Icon name="like" size={20} color="#ff4d4f" />

// å¸¦äº‹ä»¶
<Icon name="share" size={32} onClick={handleShare} />

// åŠ¨æ€å›¾æ ‡
<Icon name={isLiked ? 'liked' : 'like'} size={24} />
```

**æ–¹æ¡ˆåˆ‡æ¢**ï¼š
- ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `REACT_APP_ICON_TYPE`
- `svg` - SVG å›¾æ ‡ï¼ˆé»˜è®¤ï¼Œé€‚åˆå¤šè‰²å›¾æ ‡ï¼‰
- `iconfont` - å­—ä½“å›¾æ ‡ï¼ˆé€‚åˆå•è‰²å›¾æ ‡ï¼‰

#### å›¾æ ‡é…ç½®

**æ·»åŠ æ–°å›¾æ ‡**ï¼ˆä»¥ `heart` ä¸ºä¾‹ï¼‰ï¼š

1. å‡†å¤‡ SVG æ–‡ä»¶ï¼š`assets/heart.svg`
2. åœ¨ `iconConfig.ts` ä¸­å¯¼å…¥å¹¶é…ç½®ï¼š
```tsx
import Heart from '../assets/heart.svg';

export const iconMap = {
  'heart': {
    iconfont: 'icon-heart',  // iconfont ç±»å
    svg: Heart,               // SVG å¼•ç”¨
  },
};
```

**å›¾æ ‡åˆ«å**ï¼š
```tsx
'liked': {  // ç®€æ´åˆ«å
  iconfont: 'icon-like-active',
  svg: LikedSvg,
},
```

#### å›¾æ ‡åˆ†ç±»

**åº•éƒ¨å¯¼èˆª**ï¼š`market`ã€`forum`ã€`user`ã€`publish`ï¼ˆå« `-active` çŠ¶æ€ï¼‰

**ç”¨æˆ·åŠŸèƒ½**ï¼š`favorites`ã€`history`ã€`messages`ã€`settings`ã€`about`ã€`logout`

**äº¤äº’åŠŸèƒ½**ï¼š`like`ã€`dislike`ã€`star`ã€`share`ã€`copy`ã€`search`ã€`add`

**å†…å®¹ç±»å‹**ï¼š`goods`ã€`post`ã€`comment`ã€`all`ã€`appeal`ã€`reply`

**å¯¼èˆªç®­å¤´**ï¼š`left`ã€`right`ã€`drop`

#### å›¾æ ‡è§„èŒƒ

**å‘½åè§„åˆ™**ï¼š
- åŸºç¡€åç§°ï¼š`search`ã€`like`ã€`star`
- çŠ¶æ€åç¼€ï¼š`-active`ã€`-true`ã€`-false`
- é¢œè‰²åç¼€ï¼š`-white`ã€`-black`
- è¯­ä¹‰åˆ«åï¼š`liked`ï¼ˆå·²ç‚¹èµï¼‰ã€`favorited`ï¼ˆå·²æ”¶è—ï¼‰

**å°ºå¯¸å»ºè®®**ï¼š
- å¯¼èˆªå›¾æ ‡ï¼š24-32px
- åŠŸèƒ½æŒ‰é’®ï¼š20-24px
- åˆ—è¡¨å›¾æ ‡ï¼š16-20px

**å“åº”å¼**ï¼š
- æ‰€æœ‰ `size` å‚æ•°è‡ªåŠ¨è½¬æ¢ä¸º `rem` å•ä½
- åŸºå‡†ï¼šè®¾è®¡ç¨¿ 375px = 37.5px = 1rem
- ç¤ºä¾‹ï¼š`size={24}` â†’ `0.64rem`

#### æ—§ç‰ˆè¿ç§»

**ä» iconfont è¿ç§»**ï¼š
```tsx
// âŒ æ—§æ–¹å¼
<i className="iconfont icon-search" style={{ fontSize: '24px' }}></i>

// âœ… æ–°æ–¹å¼
<Icon name="search" size={24} />
```

**ä» SVG è¿ç§»**ï¼š
```tsx
// âŒ æ—§æ–¹å¼
import SearchIcon from 'assets/search.svg';
<img src={SearchIcon} style={{ width: '24px' }} />

// âœ… æ–°æ–¹å¼
<Icon name="search" size={24} />
```

#### æ³¨æ„äº‹é¡¹

- æ–°å¢å›¾æ ‡å¿…é¡»åœ¨ `iconConfig.ts` ä¸­é…ç½®
- SVG é¢œè‰²å¯é€šè¿‡ç¼–è¾‘ `fill` å±æ€§ä¿®æ”¹
- iconfont é¢œè‰²é€šè¿‡ `color` å±æ€§æ§åˆ¶
- åŠ¨æ€å›¾æ ‡ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼æˆ–æ¡ä»¶æ¸²æŸ“

#### iconfont å­—ä½“æ›´æ–°æ–¹æ³•

å½“éœ€è¦æ›´æ–° iconfont æ–¹æ¡ˆçš„å›¾æ ‡æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

**1. å‡†å¤‡ SVG å›¾æ ‡**
- ç¡®ä¿ SVG æ–‡ä»¶è·¯å¾„æ¸…æ™°ã€æ— å†—ä½™ä»£ç 
- å»ºè®®ä½¿ç”¨å•è‰² SVGï¼ˆiconfont ä¸æ”¯æŒå¤šè‰²ï¼‰
- ç»Ÿä¸€å›¾æ ‡å°ºå¯¸å’Œè§†å£ï¼ˆæ¨è 1024x1024ï¼‰

**2. ä½¿ç”¨ IcoMoon ç”Ÿæˆå­—ä½“**
- è®¿é—® [IcoMoon App](https://icomoon.io/app/)
- ç‚¹å‡» "Import Icons" å¯¼å…¥ SVG æ–‡ä»¶
- é€‰æ‹©éœ€è¦çš„å›¾æ ‡ï¼Œç‚¹å‡» "Generate Font"
- è®¾ç½®å­—ä½“åç§°ä¸º `icomoon`
- ä¸‹è½½ç”Ÿæˆçš„å­—ä½“åŒ…

**3. æ›¿æ¢å­—ä½“æ–‡ä»¶**
```bash
# è§£å‹ä¸‹è½½çš„å­—ä½“åŒ…ï¼Œå°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®
fonts/
  icomoon.woff   â†’ frontend/src/assets/fonts/icomoon.woff
  icomoon.ttf    â†’ frontend/src/assets/fonts/icomoon.ttf
  icomoon.svg    â†’ frontend/src/assets/fonts/icomoon.svg
  icomoon.eot    â†’ frontend/src/assets/fonts/icomoon.eot
```

**4. æ›´æ–°å›¾æ ‡æ˜ å°„**

ä»ç”Ÿæˆçš„ `style.css` ä¸­è·å–æ–°çš„ Unicode ç¼–ç ï¼Œåœ¨ `Icon.scss` ä¸­æ›´æ–°ï¼š
```scss
.icon-new-icon:before {
  content: "\e921";  // ä» IcoMoon ç”Ÿæˆçš„ç¼–ç 
}
```

**5. åŒæ­¥ iconConfig.ts**

åœ¨ `iconConfig.ts` ä¸­æ·»åŠ æ–°å›¾æ ‡é…ç½®ï¼š
```tsx
'new-icon': {
  iconfont: 'icon-new-icon',  // å¯¹åº” Icon.scss ä¸­çš„ç±»å
  svg: NewIconSvg,             // åŒæ—¶é…ç½® SVG æ–¹æ¡ˆ
},
```

**6. ä¿ç•™ selection.json**

å°† IcoMoon ç”Ÿæˆçš„ `selection.json` ä¿å­˜åˆ° `frontend/src/assets/selection.json`ï¼Œç”¨äºï¼š
- è®°å½•å½“å‰å­—ä½“åŒ…åŒ…å«çš„æ‰€æœ‰å›¾æ ‡
- ä¸‹æ¬¡æ›´æ–°æ—¶å¯ä»¥å¯¼å…¥æ­¤æ–‡ä»¶ï¼Œä¿ç•™ç°æœ‰å›¾æ ‡

**æ³¨æ„äº‹é¡¹**ï¼š
- æ¯æ¬¡æ›´æ–°å¿…é¡»é‡æ–°å¯¼å…¥ `selection.json`ï¼Œå¦åˆ™ä¼šä¸¢å¤±æ—§å›¾æ ‡
- æ›´æ–°åéœ€æµ‹è¯•æ‰€æœ‰ä½¿ç”¨è¯¥å›¾æ ‡çš„é¡µé¢
- å»ºè®®ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç† `selection.json`
- iconfont å›¾æ ‡åç§°ä¸ SVG å›¾æ ‡ä¿æŒä¸€è‡´

---

### 6. å›¾ç‰‡ä¸Šä¼ å‹ç¼©åŠŸèƒ½å®ç°

#### èƒŒæ™¯ä¸é—®é¢˜

**é—®é¢˜æè¿°**ï¼š
- æ‰‹æœºæ‹æ‘„çš„ç…§ç‰‡é€šå¸¸å¤§å°åœ¨ 3-8MB
- åŸå›¾ç›´æ¥ä¸Šä¼ å¯¼è‡´ï¼š
  - ğŸ“¶ ç½‘ç»œè¯·æ±‚è¶…æ—¶ï¼ˆå°¤å…¶æ˜¯ç§»åŠ¨ç½‘ç»œï¼‰
  - ğŸŒ ä¸Šä¼ é€Ÿåº¦æ…¢ï¼Œç”¨æˆ·ä½“éªŒå·®
  - ğŸ’¾ æœåŠ¡å™¨å­˜å‚¨å‹åŠ›å¤§
  - ğŸ’¸ æµé‡æ¶ˆè€—é«˜ï¼ˆç§»åŠ¨ç«¯ç”¨æˆ·ï¼‰

#### è§£å†³æ–¹æ¡ˆ

åœ¨å‰ç«¯ä¸Šä¼ å›¾ç‰‡ä¹‹å‰ï¼Œä½¿ç”¨ `browser-image-compression` åº“å¯¹å›¾ç‰‡è¿›è¡Œæ™ºèƒ½å‹ç¼©ï¼Œç¡®ä¿ï¼š
- ğŸ“‰ æ–‡ä»¶å¤§å°æ§åˆ¶åœ¨åˆç†èŒƒå›´
- ğŸ–¼ï¸ ä¿æŒå›¾ç‰‡è´¨é‡
- âš¡ æå‡ä¸Šä¼ é€Ÿåº¦
- âœ¨ æ”¹å–„ç”¨æˆ·ä½“éªŒ

#### å®ç°æ¶æ„

**1. å›¾ç‰‡å‹ç¼©å·¥å…·æ¨¡å—**

**æ–‡ä»¶ä½ç½®**: `frontend/src/utils/imageCompression.ts`

**æ ¸å¿ƒåŠŸèƒ½**:

| å‡½æ•°å | å‚æ•° | è¿”å›å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `compressImage` | file: File, options?: CompressionOptions | Promise\<File\> | å‹ç¼©å•ä¸ªå›¾ç‰‡ï¼Œå¤±è´¥æ—¶è¿”å›åŸæ–‡ä»¶ |
| `compressImages` | files: File[], options?: CompressionOptions | Promise\<File[]\> | å¹¶è¡Œå‹ç¼©å¤šå¼ å›¾ç‰‡ |
| `compressPostImages` | files: File[] | Promise\<File[]\> | å•†å“/å¸–å­å›¾ç‰‡å‹ç¼©ï¼ˆ2MB/2048px/90%ï¼‰ |
| `compressProfileImage` | file: File, type: 'avatar'\|'background'\|'banner' | Promise\<File\> | å¤´åƒ/èƒŒæ™¯å›¾å‹ç¼© |
| `compressAppealImages` | files: File[] | Promise\<File[]\> | ç”³è¯‰å›¾ç‰‡å‹ç¼©ï¼ˆ2.5MB/2048px/95%ï¼‰ |

**å‹ç¼©å‚æ•°é…ç½®**:

| åœºæ™¯ | æœ€å¤§æ–‡ä»¶å¤§å° | æœ€å¤§åˆ†è¾¨ç‡ | å›¾ç‰‡è´¨é‡ | è¾“å‡ºæ ¼å¼ |
|------|-------------|-----------|---------|---------|
| **å•†å“/å¸–å­** | 2MB | 2048px | 90% | JPEG |
| **ç”³è¯‰å›¾ç‰‡** | 2.5MB | 2048px | 95% | JPEG |
| **å¤´åƒ** | 1MB | 400px | 90% | JPEG |
| **èƒŒæ™¯å›¾** | 1MB | 1920px | 90% | JPEG |
| **Banner** | 1MB | 1200px | 90% | JPEG |

**æŠ€æœ¯ç‰¹æ€§**:
- âœ… åŸºäº Canvas API è¿›è¡Œå›¾ç‰‡å¤„ç†
- âœ… ä½¿ç”¨ Web Worker å¹¶è¡Œå‹ç¼©ï¼ˆä¸é˜»å¡ä¸»çº¿ç¨‹ï¼‰
- âœ… æ™ºèƒ½è´¨é‡è°ƒæ•´ç®—æ³•
- âœ… ä¿æŒå›¾ç‰‡å®½é«˜æ¯”
- âœ… ç§»é™¤ EXIF ç­‰å…ƒæ•°æ®

**é”™è¯¯å¤„ç†**:
```typescript
try {
  const compressedFile = await imageCompression(file, options);
  return compressedFile;
} catch (error) {
  console.error('âŒ å›¾ç‰‡å‹ç¼©å¤±è´¥:', error);
  return file; // å‹ç¼©å¤±è´¥æ—¶è¿”å›åŸæ–‡ä»¶
}
```

**2. é›†æˆåˆ°å‘å¸ƒåŠŸèƒ½**

**ä¿®æ”¹æ–‡ä»¶**: `frontend/src/store/mainStore.ts`

**é›†æˆç‚¹**:
- `publishMarketGoods` - å•†å“å‘å¸ƒ
- `publishForumPost` - å¸–å­å‘å¸ƒ
- `updateMarketGoods` - å•†å“ä¿®æ”¹
- `updateForumPost` - å¸–å­ä¿®æ”¹

**å®ç°ç¤ºä¾‹**:
```typescript
// å•†å“å‘å¸ƒï¼ˆä¿®æ”¹å‰ï¼‰
if (images && images.length > 0) {
  images.forEach((image) => {
    formData.append('images', image);
  });
}

// å•†å“å‘å¸ƒï¼ˆä¿®æ”¹åï¼‰
if (images && images.length > 0) {
  console.log('ğŸ”„ å¼€å§‹å‹ç¼©å•†å“å›¾ç‰‡...');
  const compressedImages = await compressPostImages(images);
  compressedImages.forEach((image) => {
    formData.append('images', image);
  });
}
```

**3. é›†æˆåˆ°ç”³è¯‰åŠŸèƒ½**

**ä¿®æ”¹æ–‡ä»¶**: `frontend/src/store/recordStore.ts`

**é›†æˆç‚¹**:
- `submitAppeal` - ç”³è¯‰æäº¤

**å®ç°ç¤ºä¾‹**:
```typescript
if (images && images.length > 0) {
  console.log('ğŸ”„ å¼€å§‹å‹ç¼©ç”³è¯‰å›¾ç‰‡...');
  const compressedImages = await compressAppealImages(images);
  compressedImages.forEach((image, index) => {
    formData.append(`images[${index}]`, image);
  });
}
```

#### å‹ç¼©æ•ˆæœæ•°æ®

**å…¸å‹åœºæ™¯æµ‹è¯•ç»“æœ**:

| åœºæ™¯ | åŸå§‹å¤§å° | å‹ç¼©åå¤§å° | å‹ç¼©ç‡ | è´¨é‡æŸå¤± |
|------|---------|-----------|--------|---------|
| æ‰‹æœºæ‹æ‘„ç…§ç‰‡ (4032x3024) | 4.2MB | 0.8MB | 81% | è‚‰çœ¼å‡ ä¹ä¸å¯è§ |
| å±å¹•æˆªå›¾ (1920x1080) | 2.1MB | 0.4MB | 81% | æ—  |
| é«˜æ¸…å›¾ç‰‡ (3840x2160) | 8.5MB | 1.5MB | 82% | å¾®å¼± |

**ä¸Šä¼ é€Ÿåº¦æå‡**:

| ç½‘ç»œç¯å¢ƒ | 4MB åŸå›¾ | 0.8MB å‹ç¼©å | æå‡å€æ•° |
|---------|---------|-------------|---------|
| 4G (5Mbps) | ~7ç§’ | ~1.5ç§’ | **5å€** |
| WiFi (20Mbps) | ~2ç§’ | ~0.4ç§’ | **5å€** |
| 5G (50Mbps) | ~0.8ç§’ | ~0.2ç§’ | **4å€** |

**ç”¨æˆ·ä½“éªŒæ”¹è¿›**:
- âœ… é¿å…è¶…æ—¶ï¼šå‹ç¼©åæ–‡ä»¶å°ï¼Œä¸Šä¼ æ›´å¿«ï¼Œä¸æ˜“è¶…æ—¶
- âœ… èŠ‚çœæµé‡ï¼šç§»åŠ¨ç«¯ç”¨æˆ·æµé‡æ¶ˆè€—å‡å°‘ 80%
- âœ… å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼šå­˜å‚¨ç©ºé—´èŠ‚çœ 80%

#### æ—¥å¿—è¾“å‡ºç¤ºä¾‹

```
ğŸ”„ å¼€å§‹æ‰¹é‡å‹ç¼© 3 å¼ å›¾ç‰‡...
ğŸ”„ å¼€å§‹å‹ç¼©å›¾ç‰‡: IMG_1234.jpg
ğŸ“Š åŸå§‹å¤§å°: 4.20 MB
âœ… å‹ç¼©å®Œæˆ: IMG_1234.jpg
ğŸ“Š å‹ç¼©åå¤§å°: 0.85 MB
ğŸ“ˆ å‹ç¼©ç‡: 79.8%
ğŸ”„ å¼€å§‹å‹ç¼©å›¾ç‰‡: IMG_5678.jpg
ğŸ“Š åŸå§‹å¤§å°: 2.10 MB
âœ… å‹ç¼©å®Œæˆ: IMG_5678.jpg
ğŸ“Š å‹ç¼©åå¤§å°: 0.42 MB
ğŸ“ˆ å‹ç¼©ç‡: 80.0%
âœ… æ‰¹é‡å‹ç¼©å®Œæˆï¼Œè€—æ—¶: 1.25s
```

#### æµè§ˆå™¨å…¼å®¹æ€§

`browser-image-compression` åº“æ”¯æŒï¼š
- âœ… Chrome 60+
- âœ… Firefox 55+
- âœ… Safari 11+
- âœ… Edge 79+

#### é…ç½®è°ƒæ•´æ–¹æ³•

å¦‚éœ€è°ƒæ•´å‹ç¼©å‚æ•°ï¼Œä¿®æ”¹ `imageCompression.ts`:

```typescript
export async function compressPostImages(files: File[]): Promise<File[]> {
  return compressImages(files, {
    maxSizeMB: 2,           // è°ƒæ•´æœ€å¤§æ–‡ä»¶å¤§å°
    maxWidthOrHeight: 2048, // è°ƒæ•´æœ€å¤§åˆ†è¾¨ç‡
    initialQuality: 0.9,    // è°ƒæ•´åˆå§‹è´¨é‡ (0-1)
    fileType: 'image/jpeg',
    useWebWorker: true,     // ä½¿ç”¨ Web Worker
  });
}
```

#### æ¶‰åŠæ–‡ä»¶æ¸…å•

**æ–°å»ºæ–‡ä»¶**:
- `frontend/src/utils/imageCompression.ts` - å›¾ç‰‡å‹ç¼©å·¥å…·æ¨¡å—

**ä¿®æ”¹æ–‡ä»¶**:
- `frontend/src/store/mainStore.ts` - å•†å“å’Œå¸–å­å‘å¸ƒ/ä¿®æ”¹
- `frontend/src/store/recordStore.ts` - ç”³è¯‰æäº¤

**æ— éœ€ä¿®æ”¹**:
- åç«¯ä»£ç  - æ— éœ€æ›´æ”¹
- æ•°æ®åº“ - æ— éœ€æ›´æ”¹
- ImageCropper ç»„ä»¶ - å·²æœ‰å‹ç¼©åŠŸèƒ½

#### æ³¨æ„äº‹é¡¹

1. **ä¾èµ–å®‰è£…**

   å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰å®‰è£… `browser-image-compression`:
   ```bash
   cd frontend
   npm install browser-image-compression
   ```

2. **å‹ç¼©æ—¶é—´**
   - å•å¼ å›¾ç‰‡å‹ç¼©é€šå¸¸è€—æ—¶ 0.3-1 ç§’
   - å¤šå¼ å›¾ç‰‡å¹¶è¡Œå‹ç¼©
   - ä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢

3. **åŸå›¾å¤‡ä»½**
   - å‹ç¼©å‰å¯ä¿å­˜åŸæ–‡ä»¶å¼•ç”¨
   - åç«¯å¯é€‰æ‹©æ€§ä¿å­˜åŸå›¾å’Œå‹ç¼©å›¾

4. **é”™è¯¯é™çº§**
   - å‹ç¼©å¤±è´¥æ—¶è‡ªåŠ¨ä½¿ç”¨åŸæ–‡ä»¶
   - ç¡®ä¿ä¸Šä¼ åŠŸèƒ½ä¸å—å½±å“

#### åç»­ä¼˜åŒ–å»ºè®®

**1. æœåŠ¡ç«¯äºŒæ¬¡å‹ç¼©**ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ `sharp` åº“åœ¨åç«¯å†æ¬¡å‹ç¼©ï¼Œæä¾›åŒé‡ä¿éšœï¼š

```bash
cd server
npm install sharp
```

```javascript
import sharp from 'sharp';

await sharp(file.buffer)
  .jpeg({ quality: 85 })
  .resize(2048, 2048, { fit: 'inside' })
  .toFile(`public/uploads/${filename}`);
```

**2. CDN å›¾ç‰‡å¤„ç†**

- å°†å›¾ç‰‡ä¸Šä¼ åˆ° CDNï¼ˆé˜¿é‡Œäº‘ OSSã€ä¸ƒç‰›äº‘ç­‰ï¼‰
- ä½¿ç”¨ CDN çš„å›¾ç‰‡å¤„ç†æœåŠ¡
- è‡ªåŠ¨ç”Ÿæˆä¸åŒå°ºå¯¸çš„ç¼©ç•¥å›¾

**3. WebP æ ¼å¼æ”¯æŒ**

- æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µ
- ä¼˜å…ˆä½¿ç”¨ WebP æ ¼å¼ï¼ˆä½“ç§¯æ›´å°ï¼‰
- ä¸æ”¯æŒæ—¶å›é€€åˆ° JPEG

**å®ç°æ—¥æœŸ**: 2025å¹´10æœˆ23æ—¥  
**åŠŸèƒ½çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: â³ å¾…æµ‹è¯•

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æ¶æ„

#### ç›®å½•ç»“æ„

```
frontend/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html         # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ favicon.ico        # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ robots.txt         # æœç´¢å¼•æ“é…ç½®
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Navbar/       # å¯¼èˆªæ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Tabbar/       # åº•éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ ImageCropper/ # å›¾ç‰‡è£å‰ªå™¨
â”‚   â”‚   â””â”€â”€ NoticeModal/  # é€šçŸ¥å¼¹çª—
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login/        # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Market/       # å•†åŸé¡µ
â”‚   â”‚   â”œâ”€â”€ Forum/        # æ ¡å›­å¢™é¡µ
â”‚   â”‚   â”œâ”€â”€ User/         # ç”¨æˆ·ä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ Admin/        # ç®¡ç†å‘˜åå°
â”‚   â”‚
â”‚   â”œâ”€â”€ store/            # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts      # Store å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ userStore.ts  # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ goodsStore.ts # å•†å“çŠ¶æ€
â”‚   â”‚   â””â”€â”€ forumStore.ts # æ ¡å›­å¢™çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ api/              # API è°ƒç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ index.ts      # Axios å®ä¾‹é…ç½®
â”‚   â”‚   â””â”€â”€ api.md        # API æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ format.ts     # æ ¼å¼åŒ–å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ validate.ts   # éªŒè¯å‡½æ•°
â”‚   â”‚   â””â”€â”€ storage.ts    # æœ¬åœ°å­˜å‚¨å°è£…
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts    # è®¤è¯ Hook
â”‚   â”‚   â””â”€â”€ useFetch.ts   # æ•°æ®è·å– Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/           # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/       # å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ icons/        # SVG å›¾æ ‡
â”‚   â”‚   â””â”€â”€ styles/       # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx           # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ App.scss          # æ ¹æ ·å¼
â”‚   â”œâ”€â”€ index.js          # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ declarations.d.ts # TypeScript ç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ package.json          # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ README.md             # å‰ç«¯æ–‡æ¡£
```

#### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 18.x | UI æ¡†æ¶ |
| **TypeScript** | 5.x | ç±»å‹ç³»ç»Ÿ |
| **Zustand** | 4.x | è½»é‡çº§çŠ¶æ€ç®¡ç† |
| **Ant Design** | 5.x | UI ç»„ä»¶åº“ |
| **React Router** | 6.x | è·¯ç”±ç®¡ç† |
| **Axios** | 1.x | HTTP è¯·æ±‚ |
| **SCSS** | - | CSS é¢„å¤„ç†å™¨ |
| **js-cookie** | 3.x | Cookie ç®¡ç† |

#### çŠ¶æ€ç®¡ç†ç­–ç•¥

**Zustand Store è®¾è®¡**ï¼š

```typescript
// userStore.ts - ç”¨æˆ·çŠ¶æ€
interface UserState {
  // çŠ¶æ€
  isAuthenticated: boolean;
  isAdmin: boolean;
  currentUser: User | null;
  
  // æŒä¹…åŒ–é…ç½®ï¼ˆåªæŒä¹…åŒ– isAuthenticated å’Œ isAdminï¼‰
  persist: {
    name: 'user-storage',
    partialize: (state) => ({
      isAuthenticated: state.isAuthenticated,
      isAdmin: state.isAdmin
    })
  };
  
  // åŠ¨ä½œ
  login: (credentials) => Promise<void>;
  logout: () => void;
  fetchUserProfile: () => Promise<void>;
  changeProfile: (data) => Promise<void>;
  changeImage: (type, file) => Promise<void>;
}
```

**æ•°æ®æµ**ï¼š
```
ç”¨æˆ·æ“ä½œ â†’ è°ƒç”¨ Store Action â†’ API è¯·æ±‚ â†’ æ›´æ–° Store â†’ UI è‡ªåŠ¨æ›´æ–°
```

**ç¼“å­˜ç­–ç•¥**ï¼š
- **Zustand Persist**: æŒä¹…åŒ–ç™»å½•çŠ¶æ€
- **LocalStorage**: ç¼“å­˜å†å²è®°å½•ã€æ”¶è—åˆ—è¡¨
- **å†…å­˜ç¼“å­˜**: é¡µé¢çº§æ•°æ®ä¸´æ—¶ç¼“å­˜

#### è·¯ç”±è®¾è®¡

```typescript
// è·¯ç”±é…ç½®
const routes = [
  { path: '/', element: <Navigate to="/market" /> },
  { path: '/login', element: <Login /> },
  { path: '/register', element: <Register /> },
  
  // å•†åŸæ¨¡å—
  { path: '/market', element: <Market /> },
  { path: '/market/:id', element: <GoodsDetail /> },
  
  // æ ¡å›­å¢™æ¨¡å—
  { path: '/forum', element: <Forum /> },
  { path: '/forum/:id', element: <PostDetail /> },
  
  // å‘å¸ƒæ¨¡å—
  { path: '/publish', element: <Publish /> },
  
  // ç”¨æˆ·æ¨¡å—
  { path: '/user', element: <User /> },
  { path: '/user/settings', element: <Settings /> },
  { path: '/user/settings/reset/:type', element: <Reset /> },
  
  // æ¶ˆæ¯å’Œè®°å½•
  { path: '/messages', element: <Messages /> },
  { path: '/history', element: <History /> },
  { path: '/favorites', element: <Favorites /> },
  
  // ç®¡ç†å‘˜æ¨¡å—
  { path: '/admin', element: <Admin />, protected: true },
  { path: '/admin/appeals', element: <Appeals />, protected: true },
  { path: '/admin/dashboard', element: <Dashboard />, protected: true }
];
```

#### ç»„ä»¶è®¾è®¡åŸåˆ™

**ç»„ä»¶åˆ†ç±»**ï¼š
1. **é¡µé¢ç»„ä»¶** (Pages): å®Œæ•´çš„é¡µé¢ï¼Œå¯¹åº”è·¯ç”±
2. **å¸ƒå±€ç»„ä»¶** (Layout): Navbarã€Tabbar ç­‰å¸ƒå±€ç»„ä»¶
3. **ä¸šåŠ¡ç»„ä»¶** (Business): å•†å“å¡ç‰‡ã€å¸–å­å¡ç‰‡ç­‰ä¸šåŠ¡ç»„ä»¶
4. **é€šç”¨ç»„ä»¶** (Common): æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰é€šç”¨ç»„ä»¶

**å‘½åè§„èŒƒ**ï¼š
- ç»„ä»¶æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼šå¤§é©¼å³° (`Navbar/Navbar.tsx`)
- æ ·å¼æ–‡ä»¶ï¼šä¸ç»„ä»¶åŒå (`Navbar.scss`)
- å·¥å…·å‡½æ•°ï¼šå°é©¼å³° (`formatDate.ts`)

**çŠ¶æ€ç®¡ç†åŸåˆ™**ï¼š
- å…¨å±€çŠ¶æ€ï¼šç”¨æˆ·ä¿¡æ¯ã€è®¤è¯çŠ¶æ€ â†’ Zustand
- é¡µé¢çŠ¶æ€ï¼šåˆ—è¡¨æ•°æ®ã€ç­›é€‰æ¡ä»¶ â†’ useState
- è¡¨å•çŠ¶æ€ï¼šä½¿ç”¨ Ant Design Form
- æœåŠ¡ç«¯çŠ¶æ€ï¼šè€ƒè™‘ä½¿ç”¨ React Queryï¼ˆå¯é€‰ï¼‰

### åç«¯æ¶æ„

#### ç›®å½•ç»“æ„

```
server/
â”œâ”€â”€ routes/               # è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ auth.js          # è®¤è¯è·¯ç”± (ç™»å½•/æ³¨å†Œ/å¯†ç )
â”‚   â”œâ”€â”€ users.js         # ç”¨æˆ·è·¯ç”±
â”‚   â”œâ”€â”€ goods.js         # å•†å“è·¯ç”±
â”‚   â”œâ”€â”€ forum.js         # æ ¡å›­å¢™è·¯ç”±
â”‚   â”œâ”€â”€ publish.js       # å‘å¸ƒè·¯ç”±
â”‚   â”œâ”€â”€ favorites.js     # æ”¶è—è·¯ç”±
â”‚   â”œâ”€â”€ history.js       # å†å²è·¯ç”±
â”‚   â”œâ”€â”€ messages.js      # ä¿¡ç®±è·¯ç”±
â”‚   â”œâ”€â”€ appeals.js       # ç”³è¯‰è·¯ç”±
â”‚   â”œâ”€â”€ admin.js         # ç®¡ç†å‘˜è·¯ç”±
â”‚   â””â”€â”€ aiTemplate.js    # AI æ¨¡æ¿è·¯ç”±
â”‚
â”œâ”€â”€ middlewares/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ checkBan.js     # å°ç¦æ£€æŸ¥ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ limiter.js      # é™æµä¸­é—´ä»¶
â”‚   â”œâ”€â”€ logIP.js        # IP è®°å½•ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ mailer.js       # é‚®ä»¶æœåŠ¡
â”‚   â””â”€â”€ uploadImg.js    # å›¾ç‰‡ä¸Šä¼ ä¸­é—´ä»¶
â”‚
â”œâ”€â”€ oldRoutes/          # æ—§ç‰ˆè·¯ç”±ï¼ˆå¾…é‡æ„ï¼‰
â”‚   â”œâ”€â”€ appeals.js
â”‚   â”œâ”€â”€ campusWall.js
â”‚   â”œâ”€â”€ posts.js
â”‚   â””â”€â”€ responses.js
â”‚
â”œâ”€â”€ public/             # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ uploads/        # ä¸Šä¼ çš„å›¾ç‰‡
â”‚       â”œâ”€â”€ avatars/    # å¤´åƒ
â”‚       â”œâ”€â”€ banners/    # Banner
â”‚       â””â”€â”€ goods/      # å•†å“å›¾ç‰‡
â”‚
â”œâ”€â”€ app.js              # åº”ç”¨å…¥å£
â”œâ”€â”€ db.js               # æ•°æ®åº“è¿æ¥é…ç½®
â”œâ”€â”€ package.json        # ä¾èµ–é…ç½®
â”œâ”€â”€ æ–°APIæ–‡æ¡£.md         # API æ–‡æ¡£
â””â”€â”€ README.md           # åç«¯æ–‡æ¡£
```

#### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Node.js** | 18.x+ | è¿è¡Œç¯å¢ƒ |
| **Express** | 4.x | Web æ¡†æ¶ |
| **MySQL** | 8.x | ä¸»æ•°æ®åº“ |
| **Redis** | 7.x | ç¼“å­˜å’Œè®¡æ•°å™¨ |
| **Multer** | 1.x | æ–‡ä»¶ä¸Šä¼  |
| **JWT** | 9.x | èº«ä»½è®¤è¯ |
| **Nodemailer** | 6.x | é‚®ä»¶æœåŠ¡ |
| **express-rate-limit** | 6.x | é™æµ |

#### æ•°æ®åº“è®¾è®¡

**æ ¸å¿ƒè¡¨ç»“æ„**ï¼š

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  user_id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  nickname VARCHAR(50),
  email VARCHAR(100),
  qq_id VARCHAR(20),
  campus_id INT DEFAULT 1,
  avatar_url VARCHAR(255),
  background_url VARCHAR(255),
  banner_url VARCHAR(255),
  theme_id INT DEFAULT 1,
  credit_score INT DEFAULT 100,
  is_banned BOOLEAN DEFAULT FALSE,
  ban_until DATETIME,
  is_admin BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å•†å“è¡¨
CREATE TABLE goods (
  post_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  title VARCHAR(200) NOT NULL,
  content TEXT,
  tag VARCHAR(50),
  campus_id INT,
  type ENUM('sell', 'buy') DEFAULT 'sell',
  price DECIMAL(10,2),
  contact VARCHAR(100),
  image_urls TEXT,
  status ENUM('active', 'inactive', 'deleted') DEFAULT 'active',
  likes INT DEFAULT 0,
  views INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- å¸–å­è¡¨
CREATE TABLE posts (
  post_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  title VARCHAR(200) NOT NULL,
  content TEXT,
  tag VARCHAR(50),
  campus_id INT,
  image_urls TEXT,
  status ENUM('active', 'deleted') DEFAULT 'active',
  likes INT DEFAULT 0,
  views INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- æ”¶è—è¡¨
CREATE TABLE favorites (
  favorite_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  post_id INT NOT NULL,
  type ENUM('goods', 'posts'),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- ç”³è¯‰è¡¨
CREATE TABLE appeals (
  appeal_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  post_id INT,
  reason TEXT NOT NULL,
  status ENUM('pending', 'resolved') DEFAULT 'pending',
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- æ¶ˆæ¯è¡¨
CREATE TABLE responses (
  response_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  post_id INT,
  appeal_id INT,
  content TEXT NOT NULL,
  response_type ENUM('violation', 'appeal_reply', 'system'),
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- äº‹ä»¶æ—¥å¿—è¡¨
CREATE TABLE event_logs (
  log_id INT PRIMARY KEY AUTO_INCREMENT,
  event_type VARCHAR(50),
  info TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### ä¸­é—´ä»¶è®¾è®¡

**1. è®¤è¯ä¸­é—´ä»¶** (`checkAuth`):
```javascript
const jwt = require('jsonwebtoken');

const checkAuth = (req, res, next) => {
  const token = req.headers['auth-token'] || req.cookies['auth-token'];
  
  if (!token) {
    return res.status(401).json({ message: 'æœªç™»å½•' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (err) {
    res.status(401).json({ message: 'Token æ— æ•ˆ' });
  }
};
```

**2. å°ç¦æ£€æŸ¥ä¸­é—´ä»¶** (`checkBan`):
```javascript
const checkBan = async (req, res, next) => {
  const userId = req.user.user_id;
  
  const [user] = await db.query(
    'SELECT is_banned, ban_until FROM users WHERE user_id = ?',
    [userId]
  );
  
  if (user.is_banned && new Date(user.ban_until) > new Date()) {
    return res.status(403).json({
      message: 'è´¦å·å·²è¢«å°ç¦',
      ban_until: user.ban_until
    });
  }
  
  next();
};
```

**3. é™æµä¸­é—´ä»¶** (`limiter`):
```javascript
const rateLimit = require('express-rate-limit');

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 100, // æœ€å¤š100æ¬¡è¯·æ±‚
  message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
});
```

**4. IP è®°å½•ä¸­é—´ä»¶** (`logIP`):
```javascript
const logIP = (req, res, next) => {
  const ip = req.ip || req.connection.remoteAddress;
  const url = req.originalUrl;
  
  // è®°å½•åˆ°æ•°æ®åº“æˆ–æ—¥å¿—æ–‡ä»¶
  console.log(`[${new Date().toISOString()}] ${ip} - ${url}`);
  
  next();
};
```

#### ç¼“å­˜ç­–ç•¥

**Redis ä½¿ç”¨åœºæ™¯**ï¼š

1. **æ—è·¯ç¼“å­˜** (Cache-Aside):
   - å•†åŸå‰ä¸¤é¡µæ•°æ®
   - æ ¡å›­å¢™å‰ä¸¤é¡µæ•°æ®
   - å¸–å­è¯¦æƒ…é¡µ

```javascript
// è·å–å•†å“åˆ—è¡¨ï¼ˆå¸¦ç¼“å­˜ï¼‰
const getGoods = async (campus, page, limit) => {
  const cacheKey = `goods:${campus}:${page}:${limit}`;
  
  // 1. å°è¯•ä» Redis è·å–
  let goods = await redis.get(cacheKey);
  if (goods) {
    return JSON.parse(goods);
  }
  
  // 2. ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“
  goods = await db.query(
    'SELECT * FROM goods WHERE campus_id = ? LIMIT ? OFFSET ?',
    [campus, limit, (page - 1) * limit]
  );
  
  // 3. å†™å…¥ç¼“å­˜ï¼ˆ10åˆ†é’Ÿè¿‡æœŸï¼‰
  await redis.setex(cacheKey, 600, JSON.stringify(goods));
  
  return goods;
};
```

2. **å†™ç©¿é€** (Write-Through):
   - ç‚¹èµæ•°
   - æµè§ˆæ•°
   - è¯„è®ºæ•°

```javascript
// ç‚¹èµï¼ˆå†™ç©¿é€ï¼‰
const likePost = async (postId, userId) => {
  // 1. å…ˆå†™ Redis
  await redis.incr(`post:${postId}:likes`);
  await redis.sadd(`post:${postId}:liked_users`, userId);
  
  // 2. å¼‚æ­¥å†™æ•°æ®åº“ï¼ˆæˆ–å®šæ—¶æ‰¹é‡å†™å…¥ï¼‰
  setTimeout(async () => {
    await db.query(
      'UPDATE goods SET likes = likes + 1 WHERE post_id = ?',
      [postId]
    );
  }, 0);
};
```

3. **è®¡æ•°å™¨**:
   - è®¿é—®ç»Ÿè®¡
   - API è°ƒç”¨ç»Ÿè®¡

```javascript
// è®°å½•è®¿é—®
const recordVisit = async () => {
  await redis.incr('stats:visits');
  await redis.incr(`stats:visits:${getTodayKey()}`);
};
```

#### AI é›†æˆ

**æ™ºèƒ½æ¨¡æ¿ç”Ÿæˆ**ï¼š
```javascript
// /api/publish/template
router.post('/template', async (req, res) => {
  const { keywords, type } = req.body;
  
  const prompt = `æ ¹æ®ä»¥ä¸‹å…³é”®è¯ç”Ÿæˆ${type === 'goods' ? 'å•†å“' : 'å¸–å­'}æè¿°ï¼š${keywords}`;
  
  try {
    // è°ƒç”¨ AI APIï¼ˆå¦‚ GPTã€æ–‡å¿ƒä¸€è¨€ç­‰ï¼‰
    const aiResponse = await callAIAPI(prompt);
    
    res.json({
      success: true,
      content: aiResponse
    });
  } catch (err) {
    res.status(500).json({ message: 'AI ç”Ÿæˆå¤±è´¥' });
  }
});
```

**æ™ºèƒ½å®¡æ ¸**ï¼š
```javascript
// å†…å®¹å®¡æ ¸
const moderateContent = async (content) => {
  // è°ƒç”¨ AI å®¡æ ¸ API
  const result = await callModerationAPI(content);
  
  if (result.violation) {
    return {
      pass: false,
      reason: result.reason
    };
  }
  
  return { pass: true };
};
```

---

## ğŸ” å¿«é€ŸæŸ¥æ‰¾æŒ‡å—

### å‘½åç›¸å…³

**é—®é¢˜ï¼šå˜é‡æ€ä¹ˆå‘½åï¼Ÿ**
â†’ å‚è€ƒ [å‘½åè§„èŒƒ - åŸºæœ¬åŸåˆ™](#åŸºæœ¬åŸåˆ™-1)
- ç®€æ´æ˜“æ‡‚ï¼Œé¿å…ç¼©å†™å’Œæ‹¼éŸ³
- ä¸ä½¿ç”¨æ— æ„ä¹‰æ•°å­—
- ä½¿ç”¨è‹±æ–‡ï¼Œéµå¾ªé©¼å³°å‘½åæ³•

**é—®é¢˜ï¼šè·¯ç”±æ€ä¹ˆå‘½åï¼Ÿ**
â†’ å‚è€ƒ [å‘½åè§„èŒƒ - è·¯ç”±éƒ¨åˆ†](#åç«¯å‘½å-1)
- å°å†™å­—æ¯ï¼Œå¤šä¸ªå•è¯ç”¨ `-` è¿æ¥
- å¦‚ï¼š`/user-info`ã€`/reset-password`

**é—®é¢˜ï¼šCSS ç±»åæ€ä¹ˆå†™ï¼Ÿ**
â†’ å‚è€ƒ [å‘½åè§„èŒƒ - å‰ç«¯éƒ¨åˆ†](#å‰ç«¯å‘½å-1)
- å°å†™å­—æ¯ + è¿å­—ç¬¦
- åµŒå¥—å‘½åï¼š`login-container`ã€`login-submit-btn`

**é—®é¢˜ï¼šæ¨¡å—ç”¨ä»€ä¹ˆè‹±æ–‡å•è¯ï¼Ÿ**
â†’ å‚è€ƒ [å‘½åè§„èŒƒ - æ¨¡å—è¯æ±‡è¡¨](#æ¨¡å—è¯æ±‡å¯¹ç…§è¡¨)

### æäº¤ç›¸å…³

**é—®é¢˜ï¼šæ€ä¹ˆåˆ›å»ºåˆ†æ”¯ï¼Ÿ**
â†’ å‚è€ƒ [æäº¤è§„èŒƒ - åˆ†æ”¯ç®¡ç†](#åˆ†æ”¯ç®¡ç†è§„èŒƒ)
```bash
git checkout -b feature/åŠŸèƒ½å
```

**é—®é¢˜ï¼šæäº¤ä¿¡æ¯æ€ä¹ˆå†™ï¼Ÿ**
â†’ å‚è€ƒ [æäº¤è§„èŒƒ - æäº¤ä¿¡æ¯](#æäº¤ä¿¡æ¯è§„èŒƒangular-è§„èŒƒ)
```bash
git commit -m "feat(æ¨¡å—): ç®€çŸ­æè¿°"
```

**é—®é¢˜ï¼šå¦‚ä½•å‘èµ· PRï¼Ÿ**
â†’ å‚è€ƒ [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md#pull-request-æµç¨‹)

### æ ·å¼ç›¸å…³

**é—®é¢˜ï¼šå›¾æ ‡å»å“ªæ‰¾ï¼Ÿ**
â†’ å‚è€ƒ [æ ·å¼è§„èŒƒ - å›¾æ ‡](#å›¾æ ‡è§„èŒƒ)
- ç´ æåº“ï¼š[iconfont é›†åˆ](https://www.iconfont.cn/collections/detail?cid=51552)
- æ ¼å¼ï¼šSVG
- å°ºå¯¸ï¼šå¯ç‚¹å‡»32pxï¼Œå…¶ä»–24px

**é—®é¢˜ï¼šä¸»é¢˜è‰²æ˜¯ä»€ä¹ˆï¼Ÿ**
â†’ å‚è€ƒ [æ ·å¼è§„èŒƒ - é¢œè‰²](#é¢œè‰²è§„èŒƒ)
- ä¸»é¢˜è‰²ï¼š`#0674C1` (è¿ç†è“)
- ä¸»é¢œè‰²ï¼š`#FFFFFF`

**é—®é¢˜ï¼šç”¨ä»€ä¹ˆç»„ä»¶åº“ï¼Ÿ**
â†’ å‚è€ƒ [æ ·å¼è§„èŒƒ - ç»„ä»¶åº“](#ç»„ä»¶åº“ä½¿ç”¨)
- ä½¿ç”¨ Ant Design
- ç®€å•æ ·å¼ç”¨åŸç”Ÿ CSS
- å¤æ‚ç»„ä»¶ç”¨ antd

### API ç›¸å…³

**é—®é¢˜ï¼šæ¥å£è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ**
â†’ å‚è€ƒ [æ¥å£è·¯ç”± - å¯¹åº”æ¨¡å—](#æ¥å£è·¯ç”±è®¾è®¡)
- ç”¨æˆ·ï¼š`/api/users`ã€`/api/auth`
- å•†å“ï¼š`/api/goods`
- æ ¡å›­å¢™ï¼š`/api/forum`

**é—®é¢˜ï¼šè¯·æ±‚å‚æ•°æœ‰å“ªäº›ï¼Ÿ**
â†’ å‚è€ƒ [æ¥å£è·¯ç”± - è¯¦ç»†è¯´æ˜](#æ¥å£è·¯ç”±è®¾è®¡)

**é—®é¢˜ï¼šè¿”å›æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ**
â†’ æŸ¥çœ‹åç«¯ API æ–‡æ¡£ (`server/æ–°APIæ–‡æ¡£.md`)

### ä¸šåŠ¡ç›¸å…³

**é—®é¢˜ï¼šå•†å“åˆ†ç±»æœ‰å“ªäº›ï¼Ÿ**
â†’ å‚è€ƒ [ä¸šåŠ¡æ ‡ç­¾ - å•†å“æ ‡ç­¾](#å•†å“æ ‡ç­¾åˆ†ç±»)
- æ•°ç ç”µå­ã€å­¦ä¹ èµ„æ–™ã€ç”Ÿæ´»ç”¨å“ã€ä»£åŠè·‘è…¿ã€å’¨è¯¢ç­”ç–‘ã€è´¦å·ä¼šå‘˜ã€é›¶é£Ÿã€å…¶ä»–

**é—®é¢˜ï¼šå¸–å­ç±»å‹æœ‰å“ªäº›ï¼Ÿ**
â†’ å‚è€ƒ [ä¸šåŠ¡æ ‡ç­¾ - å¸–å­æ ‡ç­¾](#å¸–å­æ ‡ç­¾åˆ†ç±»)
- æ–°é—»é€šçŸ¥ã€åæ§½å€¾è¯‰ã€å­¦ä¹ èµ„æ–™ã€å’¨è¯¢ç­”ç–‘ã€äº¤å‹ç»„é˜Ÿã€ç”Ÿæ´»å¨±ä¹ã€å…¶ä»–

**é—®é¢˜ï¼šç›‘æ§å“ªäº›æ•°æ®ï¼Ÿ**
â†’ å‚è€ƒ [ç›‘æµ‹æ•°æ® - API è®¾è®¡](#api-æ¥å£è®¾è®¡)

### æŠ€æœ¯å†³ç­–

**é—®é¢˜ï¼šæ•°æ®ç”¨ç¼“å­˜å—ï¼Ÿ**
â†’ å‚è€ƒ [æ•°æ®å¤„ç† - ç¼“å­˜ç­–ç•¥](#æ•°æ®å¤„ç†è§„èŒƒ)
- é«˜é¢‘æ•°æ®ï¼šRedis ç¼“å­˜
- ç”¨æˆ·æ•°æ®ï¼šLocalStorage
- æŒä¹…åŒ–ï¼šMySQL

**é—®é¢˜ï¼šå›¾ç‰‡å­˜å“ªé‡Œï¼Ÿ**
â†’ å‚è€ƒ [æ•°æ®å¤„ç† - å›¾ç‰‡å­˜å‚¨](#å›¾ç‰‡å­˜å‚¨)
- ç›®å‰ï¼šåç«¯å­˜å‚¨ (`public/uploads/`)
- è€ƒè™‘ï¼šOSS å¯¹è±¡å­˜å‚¨ï¼ˆå¾…è¯„ä¼°ï¼‰

**é—®é¢˜ï¼šåˆ†äº«æ€ä¹ˆå®ç°ï¼Ÿ**
â†’ å‚è€ƒ [é¡µé¢åˆ†äº« - æ–¹æ¡ˆè®¾è®¡](#é¡µé¢åˆ†äº«æ–¹æ¡ˆ)
- åŸºç¡€ç‰ˆï¼šå¤åˆ¶é“¾æ¥
- è¿›é˜¶ç‰ˆï¼šç³»ç»Ÿåˆ†äº«
- é«˜çº§ç‰ˆï¼šSDK é›†æˆ

### äº§å“ç›¸å…³

**é—®é¢˜ï¼šäº§å“å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ**
â†’ å‚è€ƒ [äº§å“åˆ†æ - äº§å“å®šä½](#äº§å“å®šä½ä¸æ ¸å¿ƒç†å¿µ)
- æ ¡å›­æ™ºè”ç”Ÿæ´»å¹³å°
- äºŒæ‰‹äº¤æ˜“ + æ ¡å›­å¢™

**é—®é¢˜ï¼šæ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿ**
â†’ å‚è€ƒ [äº§å“åˆ†æ - åŠŸèƒ½æ¨¡å—](#å½“å‰å­˜åœ¨çš„é—®é¢˜)

**é—®é¢˜ï¼šç‰ˆæœ¬è§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ**
â†’ å‚è€ƒ [ç‰ˆæœ¬è§„åˆ’](#ç‰ˆæœ¬è§„åˆ’)
- v0.1.0-alphaï¼šå†…éƒ¨æµ‹è¯•
- v0.2.0-betaï¼šå…¬æµ‹
- v1.0.0ï¼šæ­£å¼ç‰ˆ

---

## ğŸ“ æ–‡æ¡£ç»´æŠ¤

### æ–‡æ¡£æ›´æ–°åŸåˆ™

1. **åŠæ—¶æ€§**ï¼šè§„èŒƒ/è®¾è®¡å˜æ›´æ—¶åŒæ­¥æ›´æ–°æ–‡æ¡£
2. **å‡†ç¡®æ€§**ï¼šç¡®ä¿æ–‡æ¡£å†…å®¹ä¸å®é™…ä»£ç ä¸€è‡´
3. **å®Œæ•´æ€§**ï¼šæ–°åŠŸèƒ½/æ–°æ¨¡å—åŠæ—¶è¡¥å……æ–‡æ¡£
4. **å¯è¯»æ€§**ï¼šä½¿ç”¨æ¸…æ™°çš„è¯­è¨€å’Œç¤ºä¾‹

### å¦‚ä½•æ›´æ–°æ–‡æ¡£

1. åœ¨å¯¹åº”åˆ†æ”¯ä¸Šä¿®æ”¹æ–‡æ¡£
2. æäº¤éµå¾ªè§„èŒƒï¼š`docs(xxx): update xxx documentation`
3. é€šè¿‡ PR åˆå¹¶åˆ° `dev`
4. é‡å¤§æ–‡æ¡£æ›´æ–°éœ€åœ¨å›¢é˜Ÿå†…é€šçŸ¥

### æ–‡æ¡£åé¦ˆ

å¦‚å‘ç°æ–‡æ¡£é”™è¯¯æˆ–ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œè¯·ï¼š
- æäº¤ Issue è¯´æ˜é—®é¢˜
- åœ¨å›¢é˜Ÿè®¨è®ºä¸­åé¦ˆ
- ç›´æ¥æ PR ä¿®å¤

---

## ğŸ¯ æ€»ç»“

æœ¬æ–‡æ¡£æ•´åˆäº†é¡¹ç›®çš„æ‰€æœ‰è§„èŒƒå’Œè®¾è®¡å†…å®¹ï¼Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒå‚è€ƒèµ„æ–™ã€‚

**å¼€å‘æ—¶è¯·éµå¾ª**ï¼š
- âœ… å‘½åè§„èŒƒï¼ˆå˜é‡ã€æ–‡ä»¶ã€è·¯ç”±ï¼‰
- âœ… æäº¤è§„èŒƒï¼ˆåˆ†æ”¯ã€æäº¤ä¿¡æ¯ï¼‰
- âœ… æ ·å¼è§„èŒƒï¼ˆå›¾æ ‡ã€é¢œè‰²ã€å¸ƒå±€ï¼‰
- âœ… æ•°æ®å¤„ç†è§„èŒƒï¼ˆç¼“å­˜ã€å­˜å‚¨ï¼‰

**è®¾è®¡æ—¶è¯·å‚è€ƒ**ï¼š
- ğŸ“ äº§å“åˆ†æï¼ˆå®šä½ã€ä¼˜åŠ¿ã€ç†å¿µï¼‰
- ğŸ“ æ¥å£è·¯ç”±ï¼ˆAPI è®¾è®¡ï¼‰
- ğŸ“ ä¸šåŠ¡æ ‡ç­¾ï¼ˆåˆ†ç±»å®šä¹‰ï¼‰
- ğŸ“ ç›‘æµ‹æ•°æ®ï¼ˆDashboard è®¾è®¡ï¼‰
- ğŸ“ ç‰ˆæœ¬è§„åˆ’ï¼ˆè¿­ä»£è®¡åˆ’ï¼‰
- ğŸ“ é¡µé¢åˆ†äº«ï¼ˆåŠŸèƒ½æ–¹æ¡ˆï¼‰

**æœ‰ç–‘é—®æ—¶**ï¼š
- å…ˆæŸ¥çœ‹æœ¬æ–‡æ¡£
- å†æŸ¥é˜… [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md)
- æœ€åå’¨è¯¢å›¢é˜Ÿæˆå‘˜

---

**Happy Coding! ğŸš€**
